# Fonctionnalités du langage Kotlin

Kotlin est un langage qui support les paradigmes orienté objet et fonctionnel.
Ce chapitre couvre les caractéristiques basiques et intermédiaires.
Le chapitre suivant couvrira les fonctionnalités avancées.

## Caractéristiques de base

### Constructions de base (variables, flux de contrôle)

- Kotlin est typé statiquement et prend en charge le typage implicite.
  - Typage _statique_ : les types ne peuvent pas changer à l'exécution (c'est l'inverse du typage dynamique).
  - Typage _implicite_ : le compilateur peut inférer le type tant que c'est possible.
- `var` crée des variables ré-assignables.
- `val` crée des variables qu'on ne peut plus ré-assigner.
- Les points-virgules sont facultatifs.
- Kotlin prend en charge la déclaration de haut niveau des variables et des fonctions (elles peuvent être déclarées en dehors des classes).
- L'interpolation de chaîne de caractères est disponible avec cette syntaxe `${expression}`.
- `if` et `when` sont des expressions (elles peuvent renvoyer une valeur).
  - `when` est équivalent à l'instruction `switch` des autres langages
  - L'opérateur ternaire n'est pas disponible. L'expression `if` le remplace.
- for-each est le seul type de boucle for disponible.
- La programmation orientée objet est prise en charge comme en Java avec quelques fonctionnalités supplémentaires telles que les extensions.
- Le compilateur prend en charge la _Null Safety_. Il permet d'écrire du code sans erreur de pointeur nulle vérifié à la compilation.
- La programmation fonctionnelle est prise en charge (fonctions d'ordre supérieur et fonctions en tant qu'éléments de 1ère classe, etc.).

::: tip Utiliser val par défaut

Utiliser `var` uniquement si vous réassignez une variable ou argument.

:::

[:arrow_forward: this code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gRnVuY3Rpb25zIGNhbiBiZSBkZWNsYXJlZCBvdXRzaWRlIG9mIGNsYXNzZXNcbmZ1biBzdW0oeDpJbnQsIHk6SW50KSA6IEludCB7XG4gICAgcmV0dXJuIHggKyB5XG59IC8vIGZ1bmN0aW9uIGRlZmluaXRpb25cblxuXG52YWwgZ2xvYmFsVmFsdWUgPSBcIkkgYW0gYSBnbG9iYWwgdmFsdWVcIlxuXG5mdW4gbWFpbigpIHtcbiAgICB2YXIgYTogSW50ID0gMCAvLyB2YXJpYWJsZVxuXHRhID0gMjNcblxuXHR2YWwgYjogU3RyaW5nID0gXCJIZWxsb1wiIC8vIGltbXV0YWJsZSB2YXJpYWJsZVxuXHQvL2IgPSBcIldvcmxkXCIgLy9lcnJvclxuXG5cdHZhciBtZXNzYWdlID0gXCJIZWxsb1wiIC8vIFR5cGUgaXMgaW5mZXJyZWRcbiAgICBcbiAgICB2YWwgdG90YWwgPSBzdW0oMiwgMSkgLy8gY2FsbCBzdW0gZnVuY3Rpb24gICAgXG4gICAgcHJpbnRsbihcIlRoZSBzdW0gaXMgJHt0b3RhbH1cIikgLy8gaW50ZXJwb2xhdGlvblxuICAgIHByaW50bG4oXCJUaGUgZ2xvYmFsVmFsdWUgaXMgLT4gJGdsb2JhbFZhbHVlXCIpXG4gICAgXG4gICAgdmFsIHRlc3RSZXN1bHQxID0gaWYgKHRvdGFsID4gMykgeyBcbiAgICAgICAgXCJCaWdcIiBcbiAgICB9IGVsc2Uge1xuICAgICAgICBcInNtYWxsXCJcbiAgICB9ICBcbiAgICBwcmludGxuKHRlc3RSZXN1bHQxKVxuICBcbiAgICB2YWwgdGVzdFJlc3VsdDIgPSBpZiAodG90YWwgPiAzKSBcIkJpZ1wiIGVsc2UgXCJzbWFsbFwiXG4gICAgcHJpbnRsbih0ZXN0UmVzdWx0MilcbiAgICBcbiAgICB2YWwgZ3JlZXRpbmcgPSBcIkJvbmpvdXJcIlxuICAgIHZhbCBsYW5ndWFnZSA9IHdoZW4oZ3JlZXRpbmcpe1xuICAgICAgIFwiQm9uam91clwiLFwic2FsdXRcIiAtPiBcIkZyYW7Dp2Fpc1wiXG4gICAgICAgIFwiR29vZCBtb3JuaW5nXCIgLT4gXCJFbmdsaXNoXCJcbiAgICAgICAgZWxzZSAtPiBcIlVua25vd25cIlxuICAgIH1cbiAgICBwcmludGxuKGxhbmd1YWdlKVxuICAgIFxuICAgIGZvciAoaSBpbiAxLi4zKSBwcmludGxuKGkpIC8vIHNpbmdsZSBsaW5lXG5cdGZvciAoaSBpbiA2IGRvd25UbyAwIHN0ZXAgMikgcHJpbnRsbihpKVxuICAgIGZvciAobXNnIGluIGFycmF5T2YoXCJIZWxsb1wiLCBcIndvcmxkXCIpKSB7XG4gICAgXHRwcmludGxuKG1zZylcblx0fVxuICAgIHZhciB4ID0gMlxuICAgIHdoaWxlICh4ID4gMCkge1xuICAgIFx0eC0tXG5cdH1cbn0ifQ==) highlights the above features.

### Les fonctions

Dans cette section, les termes 'argument' et 'paramètre' sont utilisés de manière interchangeable.

Les fonctions de Kotlin ont les caractéristiques suivantes :

- Déclaration : `fun functionName(arg1 : type1 = defaultvalue1, ...) : retunrType`.
- Appeler une fonction en passant la valeur dans l'ordre de déclaration.
  - Utilisez des étiquettes d'argument pour plus de clarté, cependant, cela permet également un classement arbitraire des arguments.
- Les arguments optionnels ont une valeur par défaut et peuvent être omis lors de l'appel.
- Les fonctions sont des éléments de première classe ou citoyens : elles peuvent être affectées à une variable, passées en tant que paramètre de fonction ou renvoyées par une fonction.
  - :bulb: Une fonction qui prend une fonction comme argument ou en renvoie une est une **fonction d'ordre supérieur**.
- Un type de fonction peut être exprimé comme suit : `(typeOfParam1, typeOfParam2, etc) -> returnType` (Le type de retour vide est `Unit`).
- Les fonctions anonymes utilisent la syntaxe suivante `{ argName1, argName2, etc. -> // code }`
  - Aussi appelées fonctions **lambda** ou fonctions **littérales**
- Le dernier argument de la fonction peut être mis après la fermeture après la parenthèse fermante `compute(9, 5) { x, y -> x * y }`

[:arrow_forward: Ce code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gRnVuY3Rpb25zIGNhbiBiZSBkZWNsYXJlZCBvdXRzaWRlIG9mIGNsYXNzZXNcbmZ1biBzdW0oeDpJbnQsIHk6SW50KSA6IEludCB7XG4gICAgcmV0dXJuIHggKyB5XG59IC8vIGZ1bmN0aW9uIGRlZmluaXRpb25cblxuLy9PbmUgbGluZSBmdW5jdGlvblxuZnVuIG11bHQoeDpJbnQsIHk6IEludCkgPSB4ICogeVxuXG5mdW4gZ3JlZXQoeWVhcjogSW50ID0gMjAxOCwgbW9udGg6IEludCA9IDEsXG4gICAgICAgICAgbWVzc2FnZTogU3RyaW5nID0gXCJIZWxsb1wiKSA6IFN0cmluZyB7XG4gICAgcmV0dXJuIFwiJHttZXNzYWdlfS4gV2UgYXJlIGluICR7bW9udGh9LyR7eWVhcn1cIlxufVxuXG5mdW4gY2FsY3VsYXRlKHg6IEludCwgeTogSW50LCBmOiAoSW50LCBJbnQpIC0+IEludCkgOiBJbnR7XG4gICAgcmV0dXJuIGYoeCwgeSlcbn0gLy8gY2FsY3VsYXRlIHRha2VzIGEgZnVuY3Rpb24gYXMgYSBwYXJhbXRlclxuXG5mdW4gbWFpbihhcmd2OkFycmF5PFN0cmluZz4pe1xuICAgIHZhbCBhID0gc3VtKDIsIDEpIC8vIGNhbGwgc3VtIGZ1bmN0aW9uXG4gICAgcHJpbnRsbihtdWx0KGEsIHkgPSA4KSkgLy8gd2UgY2FuIG5hbWUgcGFyYW1ldGVyc1xuICAgIFxuICAgIHByaW50bG4oZ3JlZXQoMjAxNywgMTAsIFwiQm9uam91clwiKSkgLy9Cb25qb3VyLiBXZSBhcmUgaW4gMTAvMjAxN1xuICAgIHByaW50bG4oZ3JlZXQoKSkgLy9IZWxsby4gV2UgYXJlIGluIDEvMjAxOFxuICAgIHByaW50bG4oZ3JlZXQoMjAxOCwgbWVzc2FnZSA9IFwiS29ubmljaGl3YVwiKSlcbiAgICBcbiAgICBwcmludGxuKGNhbGN1bGF0ZSg5LCA1LCA6OnN1bSkpIC8vIDE0XG4gICAgLy8gZnVuY3Rpb25zIGNhbiBiZSBkZWNsYXJlZCBmcm9tIHdpdGhpbiBvdGhlciBmdW5jdGlvbnNcbiAgICB2YWwgZiA9IHt4OiBJbnQsIHk6IEludCAtPiB4IC0geX1cbiAgICBwcmludGxuKGNhbGN1bGF0ZSg5LCA1LCBmKSlcbiAgICBcbiAgICBmdW4gZGl2aWRlKHg6SW50LCB5OiBJbnQpID0geCAvIHlcbiAgICBwcmludGxuKGNhbGN1bGF0ZSg5LCA1LCA6OmRpdmlkZSkpXG4gICAgXG4gICAgcHJpbnRsbihjYWxjdWxhdGUoOSwgNSwgeyB4LCB5IC0+IHggKiB5IH0gKSkgLy8gNDVcbiAgICAvLyBJZiB0aGUgbGFzdCBwYXJhbWV0ZXIgaXMgZnVuY3Rpb24sIHdlIGNhbiBjbG9zZSAoKSBlcmxpZXJcbiAgICBwcmludGxuKGNhbGN1bGF0ZSg5LCA1KSB7IHgsIHkgLT4geCAqIHkgfSApIC8vIDQ1XG59In0=) illustre les fonctions en Kotlin.

La prochaine section abordera le _null safety_.

### Null safety

_null safety_ est une fonctionnalité du compilateur qui élimine la fameuse _Null pointer exception_ ou _npe_.
En effet, le compilateur signale des erreurs et des avertissements lorsque nous manipulons des types nullables (également appelées types optionnels) dès qu'il y a un risque de npe à l'exécution.
Ainsi, afin de mettre
Voici une liste des fonctionnalités de sécurité null fournies par Kotlin :

- Tous les types ne sont pas nullables par défaut ; nous ne pouvons pas affecter `null` à une variable ou à un argument.
  - Par exemple, ce code échoue `var s: String = null`.
- Un type peut être rendu nullable en le suffixant avec un _?_. Par exemple : `var s : chaîne ? = nul`.
- Kotlin interdit d'appeler une méthode ou une propriété de type non nullable, sauf si l'on fait l'une de ces possibilités :
  - Utilisez le chaînage optionnel avec le suffixe _?_.
  - Fournissez une valeur par défaut avec l'opérateur elvis _?:_.
  - Smart-cast le nullable dans un non-nullable.
  - Utilisez l'opérateur _!!_ qui élimine les vérifications du compilateur. Cela ne devrait jamais être utilisé.

::: danger Ne jamais déballer avec !!

Car cela équivaut à désactiver la _null safety_.
Utilisez les autres possibilités à la place.

:::

[:arrow_forward: ce code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiZnVuIG1haW4oYXJndjpBcnJheTxTdHJpbmc+KXtcbiAgICB2YXIgczogU3RyaW5nIC8vIHZhcnMgbXVzdCBiZSBpbml0aWFsaXplZCBiZWZvcmUgdXNpbmdcbiAgICAvLyBwcmludGxuKHMpIC0+IGNvbXBpbGUgZmFpbHNcbiAgICBzID0gXCJoZWxsb1wiXG4gICAgcHJpbnRsbihzKSAvLyBva1xuICAgIC8vIHMgPSBudWxsIC0+IGNvbXBpbGUgZmFpbHMuIFR5cGVzIGFyZSBub3QgbnVsbGFibGVcbiAgICB2YWwgbXNnIDogU3RyaW5nPyA9IG51bGwgLy8gbnVsbGFibGUgdHlwZXNcbiAgICBwcmludGxuKG1zZylcbiAgICAvLyBtc2cucmV2ZXJzZWQoKSAvLyBtc2cgbWF5IGJlIG51bGwgLT4gY29tcGlsZSBrb1xuICAgIHByaW50bG4obXNnPy5yZXZlcnNlZCgpPy5jYXBpdGFsaXplKCkpIC8vIHJldHVybiBudWxsIGlmIGFueSBwYXJ0IGlzIG51bGxcbiAgICAvL3ByaW50bG4obXNnISEucmV2ZXJzZWQoKSkgLy8gdGVsbCBjb21waWxlciB0byBpZ25vcmUgbnVsbCBjaGVja3MgLT4gTlBFIGlmIHRoZSB2YXIgaXMgbnVsbFxuICAgIFxuICAgIHZhciBuYjogSW50PyA9IDJcbiAgICAvLyBrb3RsaW4gY29tcGlsZXIga25vd24gdGhhdCBuYiBpcyBuZXZlciBudWxsIGluIGVsc2UgLT4gc21hcnQgY2FzdGluZ1xuICAgIHZhbCBkb3VibGUgPSBpZiggbmIgPT0gbnVsbCApIDAgZWxzZSBuYiAqIDJcbiAgICBwcmludGxuKGRvdWJsZSlcbiAgICBcbiAgICAvLyBzaG9ydGN1dCBvZiBwcmV2IGlmIHVzaW5nID86IGVsdmlzIG9wZXJhdG9yXG4gICAgdmFsIHRyaXBsZSA9IG5iPy50aW1lcygzKSA/OiAwIDsgcHJpbnRsbih0cmlwbGUpXG4gICAgLy9PdGhlciBzbWFydCBjYXN0aW5nIHVzZXNcbiAgICBpZiAobmIgaXMgSW50KSB7XG4gICAgICAgIHByaW50bG4obmIudGltZXMoMykpXG4gICAgfVxuICAgIFxuICAgIGlmIChuYiAhPSBudWxsKSB7XG4gICAgICAgIHByaW50bG4obmIudGltZXMoMykpXG4gICAgfVxuICAgIFxuICAgIC8vIHRoZSBhcmd1bWVudCBpcyB1bndyYXBwZWQgaW4gdGhlIGxhbWRhIG9mIGxldFxuICAgIG5iPy5sZXQgeyBpdC50aW1lcygzKSB9XG4gICAgXG4gICAgLy9zYWZlIGNhc3QgcmV0dXJuIG51bGxhYmxlIGFuZCBkb2VzIG5vdCB0aHJvdyBleGNlcHRpb25cbiAgICB2YWwgbmV3TmIgPSBuYiBhcz8gTG9uZ1xuICAgIHByaW50bG4obmV3TmIpXG4gICAgXG4gICAgLy8gQ29udmVydCBudWxsYWJsZSBsaXN0IHRvIG5vbiBudWxsYWJsZSBvbmVcbiAgICB2YWwgbnVsbGFibGVMaXN0OiBMaXN0PEludD8+ID0gbGlzdE9mKDEsIDIsIG51bGwsIDQpXG5cdHZhbCBpbnRMaXN0OiBMaXN0PEludD4gPSBudWxsYWJsZUxpc3QuZmlsdGVyTm90TnVsbCgpXG4gICAgcHJpbnRsbihpbnRMaXN0KVxufSJ9) illustrate la _null safety_ et les types optionnels.

::: warning La classe `Optional` de Java ne fournit aucun protection à la compilation
Ce code lance une npe en Java: `Optional<String> s = null; s.isPresent();`.
Le compilateur Java (au moins à la version version 17) ne propose pas d'équivalent à ce que propose Kotlin comme le smart casting.
:::

### Énumérations

Les énumérations permettent de travailler avec un groupe de valeurs de façon cadrée.
Contrairement aux énumérations Java, [les énumérations Kotlin sont des classes](https://www.geeksforgeeks.org/enum-classes-in-kotlin).
Les `enum class` de Kotlin fournissent ces fonctionnalités :

- Les expressions _when_ prennent en charge les énumérations.
- Une `enum class` peut définir des méthodes et implémenter des interfaces mais elle ne peut pas dériver d'une classe.
- Il existe des méthodes pour lister les constantes d'une `enum class`.
- Chaque constante d'une énumération a des propriétés pour obtenir son nom et sa position (en commençant par 0).

[:arrow_forward: ce code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiaW1wb3J0IGphdmEudXRpbC5mdW5jdGlvbi5CaW5hcnlPcGVyYXRvclxuaW1wb3J0IGphdmEudXRpbC5mdW5jdGlvbi5JbnRCaW5hcnlPcGVyYXRvclxuXG4vLyAvLyBTb3VyY2U6IGh0dHBzOi8va290bGlubGFuZy5vcmcvZG9jcy9lbnVtLWNsYXNzZXMuaHRtbFxuXG5lbnVtIGNsYXNzIERpcmVjdGlvbiB7XG4gICAgTk9SVEgsIFNPVVRILCBXRVNULCBFQVNUXG59XG5cbmVudW0gY2xhc3MgQ29sb3IodmFsIHJnYjogSW50KSB7XG4gICAgUkVEKDB4RkYwMDAwKSxcbiAgICBHUkVFTigweDAwRkYwMCksXG4gICAgQkxVRSgweDAwMDBGRilcbn1cblxuZW51bSBjbGFzcyBQcm90b2NvbFN0YXRlIHtcbiAgICBXQUlUSU5HIHtcbiAgICAgICAgb3ZlcnJpZGUgZnVuIHNpZ25hbCgpID0gVEFMS0lOR1xuICAgIH0sXG5cbiAgICBUQUxLSU5HIHtcbiAgICAgICAgb3ZlcnJpZGUgZnVuIHNpZ25hbCgpID0gV0FJVElOR1xuICAgIH07XG5cbiAgICBhYnN0cmFjdCBmdW4gc2lnbmFsKCk6IFByb3RvY29sU3RhdGVcbn1cblxuZW51bSBjbGFzcyBJbnRBcml0aG1ldGljcyA6IEJpbmFyeU9wZXJhdG9yPEludD4sIEludEJpbmFyeU9wZXJhdG9yIHtcbiAgICBQTFVTIHtcbiAgICAgICAgb3ZlcnJpZGUgZnVuIGFwcGx5KHQ6IEludCwgdTogSW50KTogSW50ID0gdCArIHVcbiAgICB9LFxuICAgIFRJTUVTIHtcbiAgICAgICAgb3ZlcnJpZGUgZnVuIGFwcGx5KHQ6IEludCwgdTogSW50KTogSW50ID0gdCAqIHVcbiAgICB9O1xuXG4gICAgb3ZlcnJpZGUgZnVuIGFwcGx5QXNJbnQodDogSW50LCB1OiBJbnQpID0gYXBwbHkodCwgdSlcbn1cblxuZnVuIG1haW4oKSB7XG4gICAgdmFsIHByb3RvY29sU3RhdGUgPSBQcm90b2NvbFN0YXRlLlRBTEtJTkdcbiAgICBwcmludGxuKFwiJHByb3RvY29sU3RhdGUsIHNpZ25hbCAtPiAke3Byb3RvY29sU3RhdGUuc2lnbmFsKCl9XCIpXG4gICAgcHJpbnRsbihcIm5hbWU6ICR7cHJvdG9jb2xTdGF0ZS5uYW1lfVwiKVxuICAgIHByaW50bG4oXCJvcmRpbmFsOiAke3Byb3RvY29sU3RhdGUub3JkaW5hbH1cIilcbiAgICBcbiAgICB2YWwgb3A6IEludEJpbmFyeU9wZXJhdG9yID0gSW50QXJpdGhtZXRpY3MuUExVU1xuICAgIHByaW50bG4ob3AuYXBwbHlBc0ludCgyLCAzMCkpXG4gICAgXG4gICAgcHJpbnRsbihQcm90b2NvbFN0YXRlLnZhbHVlcygpLmpvaW5Ub1N0cmluZyhcIiwgXCIpKVxuICAgIHByaW50bG4oUHJvdG9jb2xTdGF0ZS52YWx1ZU9mKFwiV0FJVElOR1wiKSlcbiAgICBcbiAgICB2YWwgYSA9IDEzXG4gICAgdmFsIGIgPSAzMVxuICAgIC8vIGxvb3AgdGhyb3VnaCB0aGUgcG9zc2libGUgZW51ZW1lcmF0aW9uc1xuICAgIGZvciAoZiBpbiBJbnRBcml0aG1ldGljcy52YWx1ZXMoKSkge1xuICAgICAgICBwcmludGxuKFwiJGYoJGEsICRiKSA9ICR7Zi5hcHBseShhLCBiKX1cIilcbiAgICB9XG59In0=) illustres les enum en Kotlin de façon succincte.
Veuillez consulter [la documentation officielle pour aller plus loin](https://kotlinlang.org/docs/enum-classes.html).

### Exercices

#### Exercice 1

[Veuillez cliquer sur le lien pour consulter l'énoncé](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gUTogZGVjbGFyZSBhIGZ1bmN0aW9uIGNhbGxlZCBjb3VudFZvd2VscyB0aGF0IHRha2VzIGEgU3RyaW5nIGFyZ3VtZW50IFxuLy8gYW5kIHJldHVybnMgaXRzIG51bWJlciBvZiB2b3dlbHMgKGEsIHUsIGkgLCBlLCBvKS4gUGxlYXNlIHVzZSBhIGZvb3IgbG9vcC4ifQ==)

::: details Déplier pour consulter la solution
[Solution](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gUTogZGVjbGFyZSBhIGZ1bmN0aW9uIGNhbGxlZCBjb3VudFZvd2VscyB0aGF0IHRha2VzIGEgU3RyaW5nIGFyZ3VtZW50IFxuLy8gYW5kIHJldHVybnMgaXRzIG51bWJlciBvZiB2b3dlbHMgKGEsIHUsIGkgLCBlLCBvKS4gUGxlYXNlIHVzZSBhIGZvb3IgbG9vcC5cblxuZnVuIGNvdW50Vm93ZWxzKHRleHQ6IFN0cmluZykgOiBJbnQge1xuICAgIHZhciBjb3VudCA9IDBcbiAgICBmb3IgKGMgaW4gdGV4dCl7XG4gICAgICAgIGlmIChcImF1aWVvXCIuY29udGFpbnMoYykpe1xuICAgICAgICAgICAgY291bnQgKz0gMVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3VudFxufVxuXG5mdW4gbWFpbihhcmdzOkFycmF5PFN0cmluZz4pe1xuICAgIHByaW50bG4oY291bnRWb3dlbHMoXCJIZWxsb1wiKSlcbiAgICBwcmludGxuKGNvdW50Vm93ZWxzKFwiV29ybGRcIikpXG59In0=)
:::

#### Exercise 2

[Veuillez cliquer sur le lien pour consulter l'énoncé](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gUTogcHJpbnQgdGhlIG1heCB2YWx1ZSBvZiB0aGUgbGlzdCAoaGludDogeW91IGNhbiB1c2UgdGhlIG1heCBtZXRob2QpXG5mdW4gcHJpbnRNYXgoaXRlbXM6IEFycmF5PEludD4/KXtcbiAgICBcbn1cblxuZnVuIG1haW4oYXJnczogQXJyYXk8U3RyaW5nPil7XG4gICAgdmFyIGl0ZW1zOiBBcnJheTxJbnQ+PyA9IG51bGxcblx0aXRlbXMgPSBhcnJheU9mKDEsIDIsIDIpXG5cdHByaW50TWF4KGl0ZW1zKVxuICAgIFxuICAgIC8vIFE6IHByaW50IHRoZSB2YWx1ZSBvZiB0aGUgc2Vjb25kIGl0ZW0gb2YgdGhlIGFycmF5XG5cblx0Ly8gUTogcHJpbnQgdGhlIHN1bSBvZiB0aGUgZmlyc3QgYW5kIGxhc3QgaXRlbSBvZiB0aGUgYXJyYXlcbn0ifQ==)

::: details Déplier pour consulter la solution
[Solution](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gUTogcHJpbnQgdGhlIG1heCB2YWx1ZSBvZiB0aGUgbGlzdCAoaGludDogeW91IGNhbiB1c2UgdGhlIG1heCBtZXRob2QpXG5mdW4gcHJpbnRNYXgoaXRlbXM6IEFycmF5PEludD4/KXtcbiAgICBwcmludGxuKGl0ZW1zPy5tYXgoKSA/OiAwKVxuICAgIHByaW50bG4oaWYgKGl0ZW1zICE9IG51bGwpIGl0ZW1zLm1heCgpIGVsc2UgMClcbn1cblxuZnVuIG1haW4oYXJnczogQXJyYXk8U3RyaW5nPil7XG4gICAgdmFyIGl0ZW1zOiBBcnJheTxJbnQ+PyA9IG51bGxcblx0Ly9pdGVtcyA9IGFycmF5T2YoMSwgMiwgMylcblx0cHJpbnRNYXgoaXRlbXMpXG4gICAgcHJpbnRNYXgobnVsbClcbiAgICBcbiAgICAvLyBROiBwcmludCB0aGUgdmFsdWUgb2YgdGhlIHNlY29uZCBpdGVtIG9mIHRoZSBhcnJheVxuICAgIC8vIC8vIFE6IHByaW50IHRoZSBzdW0gb2YgdGhlIGZpcnN0IGFuZCBsYXN0IGl0ZW0gb2YgdGhlIGFycmF5XG4gICAgaWYgKGl0ZW1zICE9IG51bGwpe1xuICAgICAgICBwcmludGxuKGl0ZW1zWzJdKVxuXHRcdHByaW50bG4oaXRlbXNbMl0gKyBpdGVtc1swXSlcbiAgICB9XG59In0=)
:::

## Fonctionnalités intermédiaires

### Programmation orientée objet

Kotlin permet d'écrire du code Orienté Object concis grâce aux caractéristiques suivantes :

- Concepts disponibles : classes, héritage, interfaces et classes abstraites.
- Prise en charge possée des propriétés : les getters et les setters sont automatiquement implémentés.
  - On peut les personnaliser les accesseurs en définissant les fonctions `get()` et `set(value)` à côté de la déclaration de la propriété.
- Les arguments du constructeur sont définis à côté du nom de la classe `class ClassName(arg1, atg2, )`
- Préfixer les arguments d'un constructeur avec `val` ou `var` en fait une propriété (`val` la rend non ré-assignable).
- Le nom du constructeur est `init` et ne nécessite pas de paramètres.
- Le compilateur vérifie que toutes les propriétés non nullables sont initialisées à la fin du constructeur.
  - :warning: Le compilateur ne vérifie pas l'initialisation des propriétés `lateinit`. Ainsi, y accéder avant alors qu'elles ne sont pas initialisés provoque une exception.
- Une classe doit être préfixée avec `open` pour permettre l'héritage.
- Kotlin utilise le niveau d'accès `public` par défaut.
- L'opérateur d'égalité `==` appelle implicitement la méthode `equals()` (contrairement à Java qui utilise l'égalité de référence).
- Un **objet compagnon** contient des méthodes et des propriétés statiques.
- Les **extensions** ajoutent des fonctions et des propriétés aux classes existantes.
  - :bulb: Ils remplacent l'héritage dans de nombreuses situations.
  - Par exemple, nous pouvons ajouter des fonctions à la classe String au lieu de créer une nouvelle classe `StringUtils`.
- Les classes et interfaces scellées ne peuvent pas être étendues ou implémentées par des tiers.

::: warning Ne définir les accesseurs que si vous avez un comportement personnalisé

Kotlin prend en charge les propriétés de façon plus poussée que Java et permet d'ajouter des accesseurs ultérieurement sans refactoriser le code qui appelle ces propriétés.
Ainsi, par défaut, il suffit de définir le nom des propriétés sans accesseurs et on peut les utiliser directement.

:::

[:arrow_forward: ce code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gY2xhc3Mgd2l0aCBkZWZhdWx0IGNvbnN0cnVjdG9yXG4vLyBvcGVuOiBhbGxvdyBpbmhlcml0YW5jZSAoY2xhc3NlcyBhbmQgcHJvcGVydGllcyBhcmUgZmluYWwgYnkgZGVmYXVsdClcbi8vIC8vIHZhbCBnZW5lcmF0ZXMgcmVhZC1vbmx5IHByb3BlcnRpZXNcbm9wZW4gY2xhc3MgUGxhbmV0KG9wZW4gdmFsIHJhZGl1czogTG9uZykge1xuICAgIC8vIHZhciBnZW5lcmF0ZXMgcHJvcGVydGllc1xuICAgIHZhciByb3RhdGlvblNwZWVkID0gMFxuICAgIFxuICAgIC8vIFdlIGNhbiBjdXN0b21pemUgdGhlIGdldHRlciBhbmQgdGhlIHNldHRlciBvZiB0aGUgcHJvcG9lcnR5XG4gICAgdmFsIHJhZGl1c0luTWV0ZXI6IExvbmcgXG4gICAgXHRnZXQoKSA9IHJhZGl1cyAqIDEwMDBcbn1cbmNsYXNzIEluaGFiaXRlZFBsYW5ldChvdmVycmlkZSB2YWwgcmFkaXVzOiBMb25nLCB2YXIgcG9wdWxhdGlvbjogTG9uZyk6IFBsYW5ldChyYWRpdXMpIHtcbiAgICBpbml0IHsgcHJpbnRsbihcImNvbnN0cnVjdG9yIGNhbGxlZFwiKSB9XG4gICAgXG4gICAgdmFyIHBvcHVsYXRpb25JbkJpbGxpb246IEludFxuICAgIGdldCgpID0gKHBvcHVsYXRpb24gLyAxXzAwMF8wMDBfMDAwKS50b0ludCgpXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIHBvcHVsYXRpb24gPSB2YWx1ZS50b0xvbmcoKSAqIDFfMDAwXzAwMF8wMDBcbiAgICB9XG4gICAgXG4gICAgZnVuIGluY3JlYXNlUG9wdWxhdGlvbihhbW91bnQ6IExvbmcpe1xuICAgICAgICBwb3B1bGF0aW9uICs9IGFtb3VudFxuICAgIH0gICAgICAgXG59XG5cbi8vIGV4dGVuc2lvbnNcbmZ1biBTdHJpbmcuY291bnRMZXR0ZXJzKGxldHRlcnM6IEFycmF5PENoYXI+KTogSW50IFxuXHQ9IHRoaXMuZmlsdGVyIHsgbGV0dGVycy5jb250YWlucyhpdCkgfVxuICAgIFx0XHQubWFwIHsgMSB9LnN1bSgpXG4gICAgICAgICAgICBcbnZhbCBJbmhhYml0ZWRQbGFuZXQuaGFzSW5oYWJpdGFudHM6IEJvb2xlYW4gXG5cdGdldCgpID0gcG9wdWxhdGlvbiA+IDBcblxuZnVuIG1haW4oKXtcbiAgICB2YWwgZWFydGggPSBJbmhhYml0ZWRQbGFuZXQoNl8zNzEsIDdfNzUzXzAwMF8wMDBfMDAwKVxuICAgIHByaW50bG4oZWFydGgpXG4gICAgcHJpbnRsbihlYXJ0aC5yYWRpdXMpXG4gICAgcHJpbnRsbihlYXJ0aC5wb3B1bGF0aW9uKVxuICAgIGVhcnRoLnBvcHVsYXRpb24gKz0gMVxuICAgIHByaW50bG4oZWFydGgucG9wdWxhdGlvbilcbiAgICBwcmludGxuKGVhcnRoLnBvcHVsYXRpb25JbkJpbGxpb24pXG4gICAgXG4gICAgZWFydGguaW5jcmVhc2VQb3B1bGF0aW9uKDEwMClcbiAgICBwcmludGxuKGVhcnRoLnBvcHVsYXRpb24pXG4gICAgcHJpbnRsbihlYXJ0aC5wb3B1bGF0aW9uSW5CaWxsaW9uKVxuICAgIFxuICAgIHByaW50bG4oXCJIZWxsb1wiLmNvdW50TGV0dGVycyhhcnJheU9mKCdIJywgJ2UnKSkpXG4gICAgcHJpbnRsbihlYXJ0aC5oYXNJbmhhYml0YW50cylcbn0ifQ==) illustre la POO en Kotlin.

### Data class

Ce sont des classes qui implémentent [des méthodes communes](https://kotlinlang.org/docs/data-classes.html):

- `equals()`, `hashCode()`, `copy()` et `toString()`
- `componentN()` qui est une syntaxe alternative pour récupérer les propriétés.

Cependant, les data class [ont des restrictions](https://kotlinlang.org/docs/data-classes.html):

- Le constructeur principal doit avoir au moins un paramètre.
- Tous les paramètres du constructeur principal doivent être marqués comme `val` ou `var`.
- Une Data class ne peut pas être abstraite, ouverte à l'héritage, scellée ou interne (:bulb: mais des extensions sont possibles).

[:arrow_forward: ce code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gZGF0YSBjbGFzcyBhcmUgZmluYWwgY2xhc3NlcyBnZW5lcmF0ZSBtYW55IHVzZWZ1bCBib2lsZXJwbGF0ZSBjb2RlIChoYXNoQ29kZSwgZXF1YWxzLCBjb21wb25lbnROKCksIGNvcHkgYW5kIHRvU3RyaW5nKVxuZGF0YSBjbGFzcyBTcGFjZVNoaXAodmFsIG1heFNwZWVkOiBJbnQsIHZhciBjdXJyZW50U3BlZWQ6IEludCA9IDApXG5cbmZ1biBtYWluKCkge1xudmFsIHNoaXAxID0gU3BhY2VTaGlwKDEwMDAsIDApXG4gICAgdmFsIHNoaXAyID0gU3BhY2VTaGlwKDEwMDAsIDApXG4gICAgdmFsIHNoaXAzID0gU3BhY2VTaGlwKDEwMDAsIDEwKVxuICAgIHByaW50bG4oc2hpcDEpXG4gICAgcHJpbnRsbihzaGlwMSA9PSBzaGlwMilcbiAgICBwcmludGxuKHNoaXAxID09IHNoaXAzKVxuICAgIFxuICAgIHByaW50bG4oc2hpcDEuY29tcG9uZW50MSgpKVxuICAgIHByaW50bG4oc2hpcDEuY29tcG9uZW50MigpKVxuICAgIFxuICAgIC8vIGNvbXBvbmVudHMgZW5hYmxlIGRlc3RydWN0dXJpbmdcbiAgICB2YWwgKG1heFNwZWVkLCBjdXJyZW50U3BlZWQpID0gc2hpcDJcbiAgICBwcmludGxuKFwiTWF4IHNwZWVkOiAkbWF4U3BlZWQuIEN1cnJlbnQgc3BlZWQ6ICRjdXJyZW50U3BlZWRcIilcbn0ifQ==) illustrate les data class.

### Programmation fonctionnelle

#### Concepts généraux

La programmation fonctionnelle s'articule autour de [ces concepts](https://www.geeksforgeeks.org/functional-programming-paradigm) : fonctions pures, récursivité, transparence référentielle, variables immuables, fonctions en tant que citoyens de première classe et fonctions d'ordre supérieur.

Expliquons brièvement ces concepts :

- Les variables immuables signifient qu'on ne peut pas changer la valeur d'une variable ou ses propriétés une fois qu'elle a été créée. Si nous voulons le faire, nous devons créer une nouvelle instance avec la nouvelle valeur.
- Les fonctions pures sont des fonctions qui n'ont pas d'effets secondaires et renverront donc toujours la même sortie étant donné la même entrée.
- Les fonctions sont des citoyennes de première classe : elles peuvent être affectées à une variable ou utilisées dans des fonctions d'ordre supérieur (passées en tant qu'un argument de fonction ou retournées dans un fonction).
- [Transparence référentielle](https://ericnormand.me/podcast/what-is-referential-transparency) : signifie qu'une expression peut être remplacée par son résultat sans modifier le comportement du programme.

:bulb: Les langages fonctionnels purs fournissent ces fonctionnalités de manière native et les appliquent (au moment de la construction).

#### Kotlin et programmation fonctionnelle

Kotlin n'est pas un langage fonctionnel pur mais il prend en charge certaines fonctionnalités.
En effet, Kotlin ne sait pas dire si une fonction est pures ou non, mais il fournit des collections immuables via la bibliothèque [kotlinx.collections.immutable](https://github.com/Kotlin/kotlinx.collections.immutable) pour nous aider à manipuler des données immuables.

::: warning `listOf` génère des listes en lecture seule, mais qui sont mutables

[Une liste en lecture seule](https://www.baeldung.com/kotlin/immutable-collections) ne peut pas ajouter ou supprimer des éléments, mais elle peut modifier les données sous-jacentes.

```kotlin
@Test
fun givenReadOnlyList_whenCastToMutableList_checkNewElementsAdded(){
    val list: List<String> = listOf("This", "Is", "Totally", "Immutable")
    (list as MutableList<String>)[2] = "Not"
    assertEquals(listOf("This", "Is", "Not", "Immutable"), list)
}
```

:::

La librairie [Arrow-kt](https://arrow-kt.io/) permet d'aller encore plus loin en développement fonctionnel.

#### Programmation déclarative

La programmation déclarative est un style célèbre dans la programmation fonctionnelle.
Il consiste à écrire du code sous la forme d'un enchaînement d'appels de fonction dans ce style `val result = f(x).g(y). ...`.
Les fonctions d'ordre supérieur remplacent de nombreuses situations où nous utiliserions des boucles.
Cela favorise le code lisible qui est facile à déboguer et à maintenir.

[:arrow_forward: ce code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiZnVuIG1haW4oKSB7XG4gICAgdmFsIGZhbnRhc3lOYW1lcyA9IGxpc3RPZihcIkNsZWJicmVyXCIsIFwiU25pbmp1clwiLCBcIk1vZGRuYWFjXCIsIFwiTGVlZG5hdFwiICxcIkdpZXJ3eXN0XCIsIFwiWmV2dXJpZ1wiLCBcIkNsYWFtcGFyYWlydFwiLCBcIkd1ZmFwcmFhbVwiLCBcIlJpZW1hcHJhc3RcIiwgXCJCaWxhbmpvbVwiKVxuICAgIFxuICAgIC8vIGZpbmQgbmFtZXMgdGhhdCBzdGFydCB3aXRoIFwiR1wiIG9yIGVuZCB3aXRoIFwidFwiIGFuZCByZXR1cm4gdGhlbSBhcyBjYXBpdGFsIGxldHRlcnNcbiAgICB2YWwgc2VsZWN0ZWROYW1lcyA9IGZhbnRhc3lOYW1lcy5maWx0ZXIgeyBpdC5zdGFydHNXaXRoKCdHJykgfHwgaXQuZW5kc1dpdGgoJ3QnKSB9Lm1hcCB7IGl0LnRvVXBwZXJDYXNlKCkgfVxuICAgIHByaW50bG4oXCJGaWx0ZXJlZCBuYW1lcyAke3NlbGVjdGVkTmFtZXMuam9pblRvU3RyaW5nKFwiLCBcIil9XCIpXG4gICAgXG4gICAgLy8gY291bnQgdGhlIG51bWJlciBvZiB2b3dlbHNcblx0Ly8gZmxhcG1hcCBhbGxvd3MgdG8gY29udmVydCBhIDJkIGFycmF5IHRvIGEgMWQgYXJyYXkgYnkgY29uY2F0ZW5hdGluZyB0aGUgZWxlbWVudHMgKGNhbGxlZCBhIGZsYXQgb3BlcmF0aW9uKVxuXHR2YWwgdm93ZWxDb3VudCA9IGZhbnRhc3lOYW1lcy5mbGF0TWFweyBpdC50b0xpc3QoKSB9LmZpbHRlcnsgXCJhaXVlb1wiLmNvbnRhaW5zKGl0KSB9Lm1hcCB7IDEgfS5zdW0oKVxuICAgIHZhbCB2b3dlbENvdW50MiA9IGZhbnRhc3lOYW1lcy5mbGF0TWFweyBpdC50b0xpc3QoKSB9XG4gICAgICAgIC5tYXB7IGlmIChcImFpdWVvXCIuY29udGFpbnMoaXQpKSAxIGVsc2UgMCB9XG4gICAgICAgIC5yZWR1Y2UgeyBhY2MsIGN1cnJlbnQgLT4gYWNjICsgY3VycmVudCB9XG4gICAgXG4gICAgcHJpbnRsbihcIlZvd2VsIGNvdW50OiAkdm93ZWxDb3VudFwiKVxuICAgIHByaW50bG4oXCJWb3dlbCBjb3VudDogJHZvd2VsQ291bnQyXCIpXG59In0=) montre comment manipuler une liste avec la programmation déclarative.

### Kotlin and Java interoperability

- Kotlin is designed with Java interoperability in mind.
- Kotlin code may require some annotations to be called from Java.
- It is possible to mix Java and Kotlin in the same project.
- JetBrain's IntelliJ and Android Studio can convert to Kotlin when pasting java code.
- Kotlin generates Java records by annotating a data class with `@JvmRecord` and targeting JVM 16, among other requirement [listed here](https://kotlinlang.org/docs/jvm-records.html).
- It is much more easier and natural to call Java from Kotlin.
  - For example: Java accessors are converted to Kotlin properties.

[:arrow_forward: this code](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiaW1wb3J0IGphdmEudXRpbC4qXG5mdW4gY29udmVydFRvQXJyYXlMaXN0KGl0ZW1zOiBMaXN0PEludD4pOiBBcnJheUxpc3Q8SW50PiB7XG4gICAgLy8gaW5zdGFudGlhdGUgYXMgaW4gSmF2YSB3aXRob3V0ICduZXcnXG4gICAgdmFsIGxpc3QgPSBBcnJheUxpc3Q8SW50PigpXG4gICAgLy8gJ2ZvcictbG9vcHMgd29yayBmb3IgSmF2YSBjb2xsZWN0aW9uczpcbiAgICBmb3IgKGl0ZW0gaW4gaXRlbXMpIHsgXG4gICAgICAgIGxpc3QuYWRkKGl0ZW0pXG4gICAgfVxuICAgIFxuICAgIGZvciAoaSBpbiAwLi5pdGVtcy5zaXplIC0gMSkge1xuICAgICAgICBsaXN0W2ldID0gaXRlbXNbaV1cbiAgICB9XG4gICAgcmV0dXJuIGxpc3Rcbn1cbmZ1biBtYWluKCl7XG4gICAgdmFsIGxpc3QgPSBjb252ZXJ0VG9BcnJheUxpc3QobGlzdE9mKDAsIDIsIC0xKSlcbiAgICBwcmludGxuKFwibGlzdDogJHtsaXN0fS4gdHlwZTogJHtsaXN0OjpjbGFzcy5xdWFsaWZpZWROYW1lfVwiKVxuICAgIC8vbGlzdDogWzAsIDIsIC0xXS4gdHlwZTogamF2YS51dGlsLkFycmF5TGlzdFxufSJ9) shows how to convert a Kotlin `List` to a Java `ArrayList`.

The official documentation provides exhaustive documentation on [Kotlin and JVM integration](https://kotlinlang.org/docs/jvm-get-started.html)

### Exercices

#### Exercice 3

[Voir l'exercice](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gRXh0ZW5zaW9ucyBhbGxvd3MgdG8gYWRkIGZ1bmN0aW9ucyBvciBwcm9wZXJ0aWVzIHRvIGFuIGV4aXN0aW5nIGNsYXNzIChldmVuIGNsYXNzZXMgaW1wb3J0ZWQgZnJvbSBvdGhlciBsaWJyYXJpZXMpXG4vLyBodHRwczovL2tvdGxpbmxhbmcub3JnL2RvY3MvcmVmZXJlbmNlL2V4dGVuc2lvbnMuaHRtbFxuXG5vcGVuIGNsYXNzIEFkdmVudHVyZXIodmFyIGhwOiBJbnQpe1xuICAgIHZhbCBtYXhIcCA9IGhwXG4gICAgZnVuIGF0dGFjaygpOlN0cmluZyA9IFwiSSBkZWFsdCAxMCBkYW1hZ2VcIlxufVxuLy8gRXh0ZW5zaW9uIGZ1bmN0aW9uIHN5bnRheDogZnVuIGNsYXNzTmFtZS5mdW5jdGlvbk5hbWUocHJhbXMpIDogcmV0dXJuVHlwZVxuZnVuIEFkdmVudHVyZXIucmVwb3J0U3RhdHVzKCk6U3RyaW5nIHtcbiAgICByZXR1cm4gXCJJIGhhdmUgJHtocH0gSFBcIlxufVxuXG5mdW4gQWR2ZW50dXJlci5hdHRhY2soKTpTdHJpbmcgPSBcIkkgZGVhbHQgMTAwMCBkYW1hZ2VcIlxuXG5jbGFzcyBCYXJiYXJpYW4oaHA6IEludCk6IEFkdmVudHVyZXIoaHApXG5cbmZ1biBCYXJiYXJpYW4ucmVwb3J0U3RhdHVzKCk6U3RyaW5nID0gXCJJIGFtIGEgYmFyYmFyaWFuIGFuZCBJIGhhdmUgJHtocH0gSFBcIlxuXG5mdW4gcHJpbnRTdGF0dXMoYWR2ZW50dXJlcjogQWR2ZW50dXJlcikge1xuICAgIHByaW50bG4oYWR2ZW50dXJlci5yZXBvcnRTdGF0dXMoKSlcbn1cblxuZnVuIG1haW4oKXtcbiAgICAvLyBUT0RPIGNyZWF0ZSBhbiBhZHZlbnR1cmVyIHdpdGggMjAwaHAgYW5kIHByaW50IHRoZSByZXN1bHQgb2YgdGhlIHJlcG9ydFN0YXR1cyBleHRlbnNpb24gbWV0aG9kXG5cbiAgICAvLyBUT0RPIHByaW50IHRoZSByZXN1bHQgb2YgdGhlIGF0dGFjayBmdW5jdGlvbi4gV2hpY2ggdmVyc2lvbiBpcyByZXRhaW5lZCAobWVtYmVyIGZ1biBvciBleHRlbnNpb24gZnVuID8pXG5cbiAgICAvLyBUT0RPIGRlZmluZSB0aGUgZXh0ZXNudGlvbiBmdW4gJ0FkdmVudHVyZXIuYXR0YWNrKGRhbWFnZTogSW50KTpTdHJpbmcnIHRoYXQgcHJpbnRzIHRoZSB2YWx1ZSBwYXNzZWQgYXMgYSBwYXJhbWV0ZXJcblxuICAgIC8vIFRPRE8gcHJpbnQgdGhlIHJlc3VsdHMgb2YgdGhpcyBuZXcgZXh0ZW5zaW9uIGZ1bmN0aW9uIHdpdGggcGFyYW1ldGVyIHZhbHVlcyA1MCwgMTAgYW5kIDIwMFxuXG4gICAgLy8gVE9ETyB3aGF0IGlzIHRoZSByZXN1bHQgb2YgcHJpbnRTdGF0dXMgb24gYSBCYXJiYXJpYW4gPyB3aGF0IGRvIHlvdSBjb25jbHVkZSA/XG4gICAgdmFsIGJhcmJhcmlhbiA9IEJhcmJhcmlhbig1MDApXG4gICAgcHJpbnRTdGF0dXMoYmFyYmFyaWFuKVxuXG4gICAgLy8gVE9ETyBjcmVhdGUgYW4gZXh0ZW5zaW9uIHByb3BlcnR5IFwibG9zdEhwXCIgdGhhdCBjb3JyZXNwb25kcyB0byBcIm1heEhwIC0gaHBcIiAuXG4gICAgLy8gIEJlY2F1c2Ugd2UgY2Fubm90IGFkZCBmaWVsZHMgdG8gYW4gZXhpc3RpbmcgY2xhc3MsIGV4dGVuc2lvbiBwcm9wZXJ0aWVzIGNhbiBiZSBkZWZpbmVkIHVzaW5nIGdldHRlcnMgYW5kIHNldHRlcnMuXG5cbiAgICAvKiAgdW5jb21tZW50IGFmdGVyIGRlZmluaW5nIHRoZSBwcm9wZXJ0eSAgXG4gICAgdmFsIGIgPSBCYXJiYXJpYW4oMzAwKVxuICAgIGIuaHAgLT0gMTAwXG4gICAgcHJpbnRsbihiLmxvc3RIcCkgLy8gMTAwXG4gICAgYi5sb3N0SHAgPSAyNTBcbiAgICBwcmludGxuKGIuaHApIC8vIDUwXG4gICAgKi9cbn0ifQ==)

::: details Solution(s)

[Solution](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gRXh0ZW5zaW9ucyBhbGxvd3MgdG8gYWRkIGZ1bmN0aW9ucyBvciBwcm9wZXJ0aWVzIHRvIGFuIGV4aXN0aW5nIGNsYXNzIChldmVuIGNsYXNzZXMgaW1wb3J0ZWQgZnJvbSBvdGhlciBsaWJyYXJpZXMpXG4vLyBodHRwczovL2tvdGxpbmxhbmcub3JnL2RvY3MvcmVmZXJlbmNlL2V4dGVuc2lvbnMuaHRtbFxuXG5vcGVuIGNsYXNzIEFkdmVudHVyZXIodmFyIGhwOiBJbnQpe1xuICAgIHZhbCBtYXhIcCA9IGhwXG4gICAgZnVuIGF0dGFjaygpOlN0cmluZyA9IFwiSSBkZWFsdCAxMCBkYW1hZ2VcIlxufVxuLy8gRXh0ZW5zaW9uIGZ1bmN0aW9uIHN5bnRheDogZnVuIGNsYXNzTmFtZS5mdW5jdGlvbk5hbWUocHJhbXMpIDogcmV0dXJuVHlwZVxuZnVuIEFkdmVudHVyZXIucmVwb3J0U3RhdHVzKCk6U3RyaW5nIHtcbiAgICByZXR1cm4gXCJJIGhhdmUgJHtocH0gSFBcIlxufVxuXG5mdW4gQWR2ZW50dXJlci5hdHRhY2soKTpTdHJpbmcgPSBcIkkgZGVhbHQgMTAwMCBkYW1hZ2VcIlxuXG5jbGFzcyBCYXJiYXJpYW4oaHA6IEludCk6IEFkdmVudHVyZXIoaHApXG5cbmZ1biBCYXJiYXJpYW4ucmVwb3J0U3RhdHVzKCk6U3RyaW5nID0gXCJJIGFtIGEgYmFyYmFyaWFuIGFuZCBJIGhhdmUgJHtocH0gSFBcIlxuXG5mdW4gcHJpbnRTdGF0dXMoYWR2ZW50dXJlcjogQWR2ZW50dXJlcikge1xuICAgIHByaW50bG4oYWR2ZW50dXJlci5yZXBvcnRTdGF0dXMoKSlcbn1cblxuZnVuIG1haW4oKXtcbiAgICAvLyBUT0RPIGNyZWF0ZSBhbiBhZHZlbnR1cmVyIHdpdGggMjAwaHAgYW5kIHByaW50IHRoZSByZXN1bHQgb2YgdGhlIHJlcG9ydFN0YXR1cyBleHRlbnNpb24gbWV0aG9kXG5cbiAgICAvLyBUT0RPIHByaW50IHRoZSByZXN1bHQgb2YgdGhlIGF0dGFjayBmdW5jdGlvbi4gV2hpY2ggdmVyc2lvbiBpcyByZXRhaW5lZCAobWVtYmVyIGZ1biBvciBleHRlbnNpb24gZnVuID8pXG5cbiAgICAvLyBUT0RPIGRlZmluZSB0aGUgZXh0ZXNudGlvbiBmdW4gJ0FkdmVudHVyZXIuYXR0YWNrKGRhbWFnZTogSW50KTpTdHJpbmcnIHRoYXQgcHJpbnRzIHRoZSB2YWx1ZSBwYXNzZWQgYXMgYSBwYXJhbWV0ZXJcblxuICAgIC8vIFRPRE8gcHJpbnQgdGhlIHJlc3VsdHMgb2YgdGhpcyBuZXcgZXh0ZW5zaW9uIGZ1bmN0aW9uIHdpdGggcGFyYW1ldGVyIHZhbHVlcyA1MCwgMTAgYW5kIDIwMFxuXG4gICAgLy8gVE9ETyB3aGF0IGlzIHRoZSByZXN1bHQgb2YgcHJpbnRTdGF0dXMgb24gYSBCYXJiYXJpYW4gPyB3aGF0IGRvIHlvdSBjb25jbHVkZSA/XG4gICAgdmFsIGJhcmJhcmlhbiA9IEJhcmJhcmlhbig1MDApXG4gICAgcHJpbnRTdGF0dXMoYmFyYmFyaWFuKVxuXG4gICAgLy8gVE9ETyBjcmVhdGUgYW4gZXh0ZW5zaW9uIHByb3BlcnR5IFwibG9zdEhwXCIgdGhhdCBjb3JyZXNwb25kcyB0byBcIm1heEhwIC0gaHBcIiAuXG4gICAgLy8gIEJlY2F1c2Ugd2UgY2Fubm90IGFkZCBmaWVsZHMgdG8gYW4gZXhpc3RpbmcgY2xhc3MsIGV4dGVuc2lvbiBwcm9wZXJ0aWVzIGNhbiBiZSBkZWZpbmVkIHVzaW5nIGdldHRlcnMgYW5kIHNldHRlcnMuXG4gICAgdmFyIEJhcmJhcmlhbi5sb3N0SHA6SW50XG4gICAgICAgIGdldCgpID0gbWF4SHAgLSBocFxuICAgICAgICBzZXQgKHZhbHVlKSB7IGhwID0gbWF4SHAgLSB2YWx1ZX1cblxuICAgIHZhbCBiID0gQmFyYmFyaWFuKDMwMClcbiAgICBiLmhwIC09IDEwMFxuICAgIHByaW50bG4oYi5sb3N0SHApIC8vIDEwMFxuICAgIGIubG9zdEhwID0gMjUwXG4gICAgcHJpbnRsbihiLmhwKSAvLyA1MFxuXG59In0=)

:::

#### Exercice 4

[Exercice](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVcbmltcG9ydCBqYXZhLnRpbWUuUGVyaW9kXG5cbi8vIC8vIFE6IGNyZWF0ZSBhbiBlbnVtZXJhdGlvbiBjbGFzcyBjYWxsZWQgXCJDYXRDb2xvclwiIHRoYXQgaGFzIHRoZXNlIHZhbHVlczogV0hJVEUsIENSRUFNLCBCTEFDSywgUkVELGFuZCBCUk9XTlxuXG4vLyBROiBjcmVhdGUgYSBkYXRhY2xhc3MgXCJDYXRcIiB0aGF0IGhhcyAzIGltbXV0YWJsZSBwcm9wZXJ0aWVzOiBuYW1lOiBTdHJpbmcsIGJpcnRoRGF0ZTogTG9jYWxEYXRlIGFuZCBjb2xvcjogQ2F0Q29sb3JcblxuZnVuIG1haW4oKXtcbiAgICAvLyBROiBhZGQgYSBjYXQgd2l0aCBjcmVhbSBjb2xvciBhbmQgYW5vdGhlciBvbmUgd2l0aCBibGFjayBjb2xvclxuICAgIHZhbCBjYXRzID0gbGlzdE9mKFxuICAgICAgQ2F0KFwiQmVsbGFcIiwgTG9jYWxEYXRlLnBhcnNlKFwiMjAyMC0xMC0xMlwiKSwgQ2F0Q29sb3IuV0hJVEUpLFxuICAgICAgQ2F0KFwiU2ltYmFcIiwgTG9jYWxEYXRlLnBhcnNlKFwiMjAxMC0wMS0zMVwiKSwgQ2F0Q29sb3IuQlJPV04pLFxuICAgICAgQ2F0KFwiS2l0dHlcIiwgTG9jYWxEYXRlLnBhcnNlKFwiMjAxNy0wNS0wNlwiKSwgQ2F0Q29sb3IuV0hJVEUpXG4gICAgKVxuICAgIFxuICAgIC8vIFBsZWFzZSB1c2UgYSBkZWNsYXJhdGl2ZSBzdHlsZSBpbiB0aGlzIGV4ZXJjaXNlXG5cbiAgICAvLyBROiBwcmludCB0aGUgbmFtZXMgb2Ygd2hpdGUgY2F0c1xuXG4gICAgLy8gUTogcHJpbnQgdGhlIG5hbWUgYW5kIGFnZSAoYW5kIGp1c3QgdGhlIG5hbWUgYW5kIGFnZSkgb2YgY2F0cyB0aGF0IGFyZSBhdCBsZWFzdCA1IHllYXJzIG9sZC5cbiAgICAvLyBIaW50OiBpbXBvcnQgamF2YS50aW1lLlBlcmlvZCBhbmQgdXNlIFBhaXIgY2xhc3NcbiAgICAgICBcbiAgICBcbiAgICAvLyBMZXQncyBzdXBwb3NlIHRoYXQgd2UgaGF2ZSBhbiBhcnJheSBvZiBvd25lcnMgd2hlcmUgZWFjaCBlbGVtZW50IGlzIHRoZSBvd25lciBvZiB0aGUgY29ycmVzcG9uZGluZyBpbmRleCBpbiB0aGUgY2F0cyB0YWJsZS4gRm9yIGV4YW1wbGUgQW5kYW5vciBpcyB0aGUgb3duZXIgb2YgS2l0dHlcbiAgICB2YWwgb3duZXJzID0gbGlzdE9mKFwiSXJ5ZW5cIiwgXCJJcnllblwiLCBcIkFuZGFub3JcIiwgXCJBbmRhbm9yXCIsIFwiR2FuZGFsZlwiKVxuICAgIFxuICAgIC8vIFE6IHVzaW5nIHRoZSB6aXAgbWV0aG9kLCBwcmludCB0aGUgbmFtZSBvZiBjYXRzIG93bmVkIGJ5IFwiSXJ5ZW5cIlxufSJ9)

::: details Solutions(s)
[Solution](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVcbmltcG9ydCBqYXZhLnRpbWUuUGVyaW9kXG5cbi8vIC8vIFE6IGNyZWF0ZSBhbiBlbnVtZXJhdGlvbiBjbGFzcyBjYWxsZWQgXCJDYXRDb2xvclwiIHRoYXQgaGFzIHRoZXNlIHZhbHVlczogV0hJVEUsIENSRUFNLCBCTEFDSywgUkVELGFuZCBCUk9XTlxuZW51bSBjbGFzcyBDYXRDb2xvciB7XG4gICAgV0hJVEUsIENSRUFNLCBCTEFDSywgUkVELCBCUk9XTlxufVxuXG4vLyBROiBjcmVhdGUgYSBkYXRhY2xhc3MgXCJDYXRcIiB0aGF0IGhhcyAzIGltbXV0YWJsZSBwcm9wZXJ0aWVzOiBuYW1lOiBTdHJpbmcsIGJpcnRoRGF0ZTogTG9jYWxEYXRlIGFuZCBjb2xvcjogQ2F0Q29sb3Jcbi8vIEhpbnQ6IGltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlXG5kYXRhIGNsYXNzIENhdCh2YWwgbmFtZTogU3RyaW5nLCB2YWwgYmlydGhEYXRlOiBMb2NhbERhdGUsIHZhbCBjb2xvcjogQ2F0Q29sb3IpXG5cbmZ1biBtYWluKCl7XG4gICAgLy8gUTogYWRkIGEgY2F0IHdpdGggY3JlYW0gY29sb3IgYW5kIGFub3RoZXIgb25lIHdpdGggYmxhY2sgY29sb3JcbiAgICB2YWwgY2F0cyA9IGxpc3RPZihcbiAgICAgIENhdChcIkJlbGxhXCIsIExvY2FsRGF0ZS5wYXJzZShcIjIwMjAtMTAtMTJcIiksIENhdENvbG9yLldISVRFKSxcbiAgICAgIENhdChcIlNpbWJhXCIsIExvY2FsRGF0ZS5wYXJzZShcIjIwMTAtMDEtMzFcIiksIENhdENvbG9yLkJST1dOKSxcbiAgICAgIENhdChcIktpdHR5XCIsIExvY2FsRGF0ZS5wYXJzZShcIjIwMTctMDUtMDZcIiksIENhdENvbG9yLldISVRFKSxcbiAgICAgIENhdChcIk1pYW91XCIsIExvY2FsRGF0ZS5wYXJzZShcIjIwMTEtMDItMjVcIiksIENhdENvbG9yLkNSRUFNKSxcbiAgICAgIENhdChcIk55YW5cIiwgTG9jYWxEYXRlLnBhcnNlKFwiMjAxNC0wNy0xMVwiKSwgQ2F0Q29sb3IuQkxBQ0spXG4gICAgKVxuICAgIFxuICAgIC8vIFBsZWFzZSB1c2UgYSBkZWNsYXJhdGl2ZSBzdHlsZSBpbiB0aGlzIGV4ZXJjaXNlXG5cbiAgICAvLyBROiBwcmludCB0aGUgbmFtZXMgb2Ygd2hpdGUgY2F0c1xuICAgIHZhbCB3aGl0ZUNhdE5hbWVzID0gY2F0cy5maWx0ZXIgeyBpdC5jb2xvciA9PSBDYXRDb2xvci5XSElURSB9Lm1hcCB7IGl0Lm5hbWUgfVxuICAgIHByaW50bG4oXCJXaGl0ZSBjYXRzOiAke3doaXRlQ2F0TmFtZXMuam9pblRvU3RyaW5nKFwiLCBcIil9XCIpXG5cbiAgICAvLyBROiBwcmludCB0aGUgbmFtZSBhbmQgYWdlIChhbmQganVzdCB0aGUgbmFtZSBhbmQgYWdlKSBvZiBjYXRzIHRoYXQgYXJlIGF0IGxlYXN0IDUgeWVhcnMgb2xkLlxuICAgIC8vIEhpbnQ6IGltcG9ydCBqYXZhLnRpbWUuUGVyaW9kIGFuZCB1c2UgUGFpciBjbGFzc1xuICAgIHZhbCBNb3JlVGhhbjV5b0NhdHMgPSBjYXRzLmZpbHRlciB7IFBlcmlvZC5iZXR3ZWVuKGl0LmJpcnRoRGF0ZSwgTG9jYWxEYXRlLm5vdygpKS5nZXRZZWFycygpID49IDUgfVxuICAgIFx0Lm1hcCB7IFBhaXIoaXQubmFtZSwgUGVyaW9kLmJldHdlZW4oaXQuYmlydGhEYXRlLCBMb2NhbERhdGUubm93KCkpLmdldFllYXJzKCkpIH1cbiAgICAgICAgLm1hcCB7IFwiKG5hbWU6ICR7aXQuZmlyc3R9IC0gYWdlOiAke2l0LnNlY29uZH0pXCIgfVxuICAgIHByaW50bG4oXCJXaGl0ZSBjYXRzOiAke01vcmVUaGFuNXlvQ2F0cy5qb2luVG9TdHJpbmcoXCIsIFwiKX1cIilcbiAgICAgICAgXG4gICAgXG4gICAgLy8gTGV0J3Mgc3VwcG9zZSB0aGF0IHdlIGhhdmUgYW4gYXJyYXkgb2Ygb3duZXJzIHdoZXJlIGVhY2ggZWxlbWVudCBpcyB0aGUgb3duZXIgb2YgdGhlIGNvcnJlc3BvbmRpbmcgaW5kZXggaW4gdGhlIGNhdHMgdGFibGUuIEZvciBleGFtcGxlIEFuZGFub3IgaXMgdGhlIG93bmVyIG9mIEtpdHR5XG4gICAgdmFsIG93bmVycyA9IGxpc3RPZihcIklyeWVuXCIsIFwiSXJ5ZW5cIiwgXCJBbmRhbm9yXCIsIFwiQW5kYW5vclwiLCBcIkdhbmRhbGZcIilcbiAgICBcbiAgICAvLyBROiB1c2luZyB0aGUgemlwIG1ldGhvZCwgcHJpbnQgdGhlIG5hbWUgb2YgY2F0cyBvd25lZCBieSBcIklyeWVuXCJcblx0dmFsIGlyeWVuQ2F0cyA9IChvd25lcnMgemlwIGNhdHMpLmZpbHRlciB7IGl0LmZpcnN0ID09IFwiSXJ5ZW5cIn0ubWFwIHsgaXQuc2Vjb25kLm5hbWUgfVxuICAgIHByaW50bG4oXCJJcnllbidzIGNhdHMgYXJlOiAke2lyeWVuQ2F0cy5qb2luVG9TdHJpbmcoXCIsIFwiKX1cIilcbn0ifQ==)
:::

#### Exercice 5

[Exercice](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gVGhlICd0aGlzJyBrZXl3b3JkIGluc2lkZSBhbiBleHRlbnNpb24gY29ycmVzcG9uZHMgdG8gdGhlIHJlY2VpdmVyIG9iamVjdCAodGhlIG9iamVjdCB0aGF0IGNhbGxzIHRoZSBleHRlbnNpb24pXG4vLyBUT0RPIGNlZWF0ZSBhbiBleHRlbnNpb24gZnVuY3Rpb24gJ21ha2VRdWVzdGlvbicgb2YgdGhlIFN0cmluZyBjbGFzcyB0aGF0IHJldHVybiBhIG5ldyBTdHJpbmcgdGhhdCBjb250YWlucyB0aGUgb3JpZ2luYWwgU3RyaW5nICsgJz8nIGF0IHRoZSBlbmRcblxuLy8gcHJpbnRsbihcIkhvdyBkbyB5b3UgZG9cIi5tYWtlUXVlc3Rpb24oKSkgLy8gc2hvdWxkIHByaW50IFwiSG93IGRvIHlvdSBkbyA/XCJcblxuY2xhc3MgTWFnZShocDogSW50KTogRXh0ZW5zaW9uczAxLkFkdmVudHVyZXIoaHApe1xuICAgIGNvbXBhbmlvbiBvYmplY3Qge1xuICAgICAgICB2YXIgY291bnQgPSAwXG4gICAgfVxuICAgIGluaXQge1xuICAgICAgICBNYWdlLmNvdW50ICs9IDFcbiAgICB9XG59XG4vLyBUT0RPIGRlZmluZSBhbiBleHRlbnNpb24gZnVuY3Rpb24gb24gdGhlIGNvbXBhbmlvbiBvYmplY3QgdGhhdCBwcmludHMgdGhlIG51bWJlciBvZiBjcmVhdGVkIG1hZ2VzLlxuLy8gaGludDogXCJ0aGlzXCIgYWxsb3dzIHRvIHJlZmVyZW5jZSB0aGUgY29tcGFuaW9uIG9iamVjdFxuXG52YWwgbWFnZSA9IE1hZ2UoMTAwKVxudmFsIG1hZ2UyID0gTWFnZSgyMDApXG5wcmludChcIk1hZ2UgY291bnQ6IFwiKVxuLy8gTWFnZS5wcmludENvdW50KCkgLy8gMlxuXG4vLyBUT0RPIGNyYXRlIGFuIGV4dGVuc2lvbiBmdW5jdGlvbiBcImV2ZW5Db3VudCgpOkludFwiIG9uIExpc3Q8SW50PiB0aGF0IHJldHVybiB0aGUgbnVtYmVyIG9mIGV2ZW4gdmFsdWVzXG5cbi8vcHJpbnRsbihsaXN0T2YoMSwgMiwgMywgNCwgNSkuZXZlbkNvdW50KCkpIC8vIHByaW50cyAyXG5cbi8vIFRPRE8gY3JlYXRlIGEgZ2VuZXJpYyBleHRlbnNpb24gZnVuY3Rpb24gXCJjb25jYXRlbmF0ZSgpOlN0cmluZ1wiIG9uIExpc3Q8VD4gdGhhdCBjb25jYXRlbmF0ZXMgdGhlIHRvU3RyaW5nIHZhbHVlIG9mIGFsbCBvZiB0aGUgZWxlbWVudHMgb2YgdGhlIGxpc3RcblxuLy8gcHJpbnRsbihsaXN0T2YoXCJIZWxsbyBcIiwgXCJXb3JsZFwiLCBcIkxpbmVcIikuY29uY2F0ZW5hdGUoKSkgLy8gc2hvdWxkIHByaW50IFwiSGVsbG8gV29ybGRMaW5lXCJcbi8vIHByaW50bG4obGlzdE9mKDEwMCwgMjAwLCAzMDApLmNvbmNhdGVuYXRlKCkpIC8vIHNob3VsZCBwcmludCBcIjEwMDIwMDMwMFwiXG5cbi8vIFRPRE8gY3JlYXRlIGEgZ2VuZXJpYyBleHRlbnNpb24gZnVuY3Rpb24gXCJMaXN0Py5tYWtlTm90TnVsbCgpOkxpc3QnICB0aGF0IHJldHVybnMgYW4gZW1wdHkgbGlzdCBpZiB0aGUgcmVjZWl2ZXIgaXMgbnVsbCwgb3IgdGhlIG9yaWdpbmFsIGxpc3Qgb3JoZXJ3aXNlXG5cbi8vIHByaW50bG4obGlzdE9mKDEsIDIsIDMpLm1ha2VOb3ROdWxsKCkpIC8vIHNob3VsZCBwcmludCBbMSwgMiwgM11cbi8vIHZhbCBsOiBMaXN0PEludD4/ID0gbnVsbFxuLy8gcHJpbnRsbihsLm1ha2VOb3ROdWxsKCkpIC8vIHNob3VsZCBwcmludCBbXSJ9)

::: details Solution(s)

[Solution](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gVGhlICd0aGlzJyBrZXl3b3JkIGluc2lkZSBhbiBleHRlbnNpb24gY29ycmVzcG9uZHMgdG8gdGhlIHJlY2VpdmVyIG9iamVjdCAodGhlIG9iamVjdCB0aGF0IGNhbGxzIHRoZSBleHRlbnNpb24pXG4vLyBUT0RPIGNlZWF0ZSBhbiBleHRlbnNpb24gZnVuY3Rpb24gJ21ha2VRdWVzdGlvbicgb2YgdGhlIFN0cmluZyBjbGFzcyB0aGF0IHJldHVybiBhIG5ldyBTdHJpbmcgdGhhdCBjb250YWlucyB0aGUgb3JpZ2luYWwgU3RyaW5nICsgJz8nIGF0IHRoZSBlbmRcblxuLy8gcHJpbnRsbihcIkhvdyBkbyB5b3UgZG9cIi5tYWtlUXVlc3Rpb24oKSkgLy8gc2hvdWxkIHByaW50IFwiSG93IGRvIHlvdSBkbyA/XCJcblxuLy8gVE9ETyBkZWZpbmUgYW4gZXh0ZW5zaW9uIGZ1bmN0aW9uIG9uIHRoZSBjb21wYW5pb24gb2JqZWN0IHRoYXQgcHJpbnRzIHRoZSBudW1iZXIgb2YgY3JlYXRlZCBtYWdlcy5cbmNsYXNzIE1hZ2UoaHA6IEludCk6IEV4dGVuc2lvbnMwMS5BZHZlbnR1cmVyKGhwKXtcbiAgICBjb21wYW5pb24gb2JqZWN0IHtcbiAgICAgICAgdmFyIGNvdW50ID0gMFxuICAgIH1cbiAgICBpbml0IHtcbiAgICAgICAgTWFnZS5jb3VudCArPSAxXG4gICAgfVxufVxuLy8gaGludDogXCJ0aGlzXCIgYWxsb3dzIHRvIHJlZmVyZW5jZSB0aGUgY29tcGFuaW9uIG9iamVjdFxuZnVuIE1hZ2UuQ29tcGFuaW9uLnByaW50Q291bnQoKSA9IHByaW50bG4odGhpcy5jb3VudClcblxudmFsIG1hZ2UgPSBNYWdlKDEwMClcbnZhbCBtYWdlMiA9IE1hZ2UoMjAwKVxucHJpbnQoXCJNYWdlIGNvdW50OiBcIilcbk1hZ2UucHJpbnRDb3VudCgpIC8vIDJcblxuLy8gVE9ETyBjcmF0ZSBhbiBleHRlbnNpb24gZnVuY3Rpb24gXCJldmVuQ291bnQoKTpJbnRcIiBvbiBMaXN0PEludD4gdGhhdCByZXR1cm4gdGhlIG51bWJlciBvZiBldmVuIHZhbHVlc1xuXG4vL3ByaW50bG4obGlzdE9mKDEsIDIsIDMsIDQsIDUpLmV2ZW5Db3VudCgpKSAvLyBwcmludHMgMlxuXG4vLyBUT0RPIGNyZWF0ZSBhIGdlbmVyaWMgZXh0ZW5zaW9uIGZ1bmN0aW9uIFwiY29uY2F0ZW5hdGUoKTpTdHJpbmdcIiBvbiBMaXN0PFQ+IHRoYXQgY29uY2F0ZW5hdGVzIHRoZSB0b1N0cmluZyB2YWx1ZSBvZiBhbGwgb2YgdGhlIGVsZW1lbnRzIG9mIHRoZSBsaXN0XG5mdW4gPFQ+IExpc3Q8VD4uY29uY2F0ZW5hdGUoKTogU3RyaW5nID0gdGhpcy5tYXAgeyB2IC0+IHYudG9TdHJpbmcoKSB9LnJlZHVjZSB7IGFjYywgcyAtPiBhY2MgKyBzIH1cbnByaW50bG4obGlzdE9mKFwiSGVsbG8gXCIsIFwiV29ybGRcIiwgXCJMaW5lXCIpLmNvbmNhdGVuYXRlKCkpIC8vIHNob3VsZCBwcmludCBcIkhlbGxvIFdvcmxkTGluZVwiXG5wcmludGxuKGxpc3RPZigxMDAsIDIwMCwgMzAwKS5jb25jYXRlbmF0ZSgpKSAvLyBzaG91bGQgcHJpbnQgXCIxMDAyMDAzMDBcIlxuXG4vLyBUT0RPIGNyZWF0ZSBhIGdlbmVyaWMgZXh0ZW5zaW9uIGZ1bmN0aW9uIFwiTGlzdD8ubWFrZU5vdE51bGwoKTpMaXN0JyAgdGhhdCByZXR1cm4gYW4gZW1wdHkgbGlzdCBpZiB0aGUgcmVjZWl2ZXIgaXMgbnVsbCwgb3IgdGhlIG9yaWdpbmFsIGxpc3Qgb3JoZXJ3aXNlXG5mdW4gPFQ+IExpc3Q8VD4/Lm1ha2VOb3ROdWxsKCk6IExpc3Q8VD57XG4gICAgcmV0dXJuIGxpc3RPZjxUPigpXG59XG5wcmludGxuKGxpc3RPZigxLCAyLCAzKS5tYWtlTm90TnVsbCgpKSAvLyBzaG91bGQgcHJpbnQgWzEsIDIsIDNdXG52YWwgbDogTGlzdDxJbnQ+PyA9IG51bGxcbnByaW50bG4obC5tYWtlTm90TnVsbCgpKSAvLyBzaG91bGQgcHJpbnQgW10ifQ==)

:::

#### Exercice 6

[Exercice](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gVE9ETyB1c2luZyB0aGUgb2JqZWN0IGRlY2xhcmF0aW9uIHN5bmN0YXgsIGNyZWF0ZSBhIHNpbmdsZXRvbiBEcmlua0Rpc3BlbnNlciB0aGF0IGhhcyB0aGVzZSBtZXRob2RzOiBwdXREcmluayhEcmluayksIExpc3Q8RHJpbms+IGFsbEF2YWlsYWJsZURyaW5rcygpIGFuZCBwaWNrTGFzdERyaW5rKCk6RHJpbmtcbi8vICBTeW50YXg6IG9iamVjdCBTaW5nbGV0b25OYW1lIHsgLi4uIH0gfVxuXG4vLyBUT0RPIHVuY29tbWVudCB0byB0ZXN0IHlvdSBjb2RlXG4vL0RyaW5rRGlzcGVuc2VyLnB1dERyaW5rKE9iamVjdEV4cHJlc3Npb25zMDEuRHJpbmsoMTAwKSlcbi8vRHJpbmtEaXNwZW5zZXIucHV0RHJpbmsoT2JqZWN0RXhwcmVzc2lvbnMwMS5Ecmluayg1MCkpXG4vL0RyaW5rRGlzcGVuc2VyLnB1dERyaW5rKE9iamVjdEV4cHJlc3Npb25zMDEuRHJpbmsoNzApKVxuLy9wcmludGxuKERyaW5rRGlzcGVuc2VyLmFsbEF2YWlsYWJsZURyaW5rcygpLnNpemUpIC8vIDNcbi8vRHJpbmtEaXNwZW5zZXIucHV0RHJpbmsoT2JqZWN0RXhwcmVzc2lvbnMwMS5waWNrTGFzdERyaW5rKCkpXG4vL3ByaW50bG4oRHJpbmtEaXNwZW5zZXIuYWxsQXZhaWxhYmxlRHJpbmtzKCkuc2l6ZSkgLy8gMlxuXG4vLyBUT0RPIGNyZWF0ZSBhIGNsYXNzIG5hbWVkIERyaW5rTWFrZXIuIFdlIHdhbnQgdG8gaGF2ZSBhIHN0YXRpYyBtZXRob2QgXCJjcmVhdGVEcmluaygpOiBPYmplY3RFeHByZXNzaW9uczAxLkRyaW5rXCIgdGhhdCBjcmVhdGVzIGEgbmV3IERyaW5rLlxuLy8gICBBbiBvYmplY3QgZGVjbGFyYXRpb24gaW5zaWRlIGEgY2xhc3MgY2FuIGJlIG1hcmtlZCBhcyBjb21wYW5pb25cbi8vICAgU3ludGF4OlxuLypcbmNsYXNzIENsYXNzTmFtZSB7XG4gICAgY29tcGFuaW9uIG9iamVjdCAob3B0aW9ubmFsIG5hbWUpIHtcbiAgICAgICAgLi4uXG4gICAgfVxufVxuKi9cblxuXG4vLyBUT0RPIHVuY29tbWVudCB0byB0ZXN0XG4vL3ZhbCBkcmluayA9IERyaW5rTWFrZXIuY3JlYXRlRHJpbmsoKVxuLy92YWwgZHJpbmsyID0gRHJpbmtNYWtlci5Db21wYW5pb24uY3JlYXRlRHJpbmsoKVxuXG4vLyBUT0RPIHdoYXQgaXMgdGhlIHR5cGUgb2YgY29tcGFuaW9uT2JqZWN0XG4vL3ZhbCBjb21wYW5pb25PYmplY3QgPSBEcmlua01ha2VyXG4vL2NvbXBhbmlvbk9iamVjdC5jcmVhdGVEcmluaygpXG5cbi8vIFRPRE8gbWFrZSB0aGUgZWFybGllciBjb21wYW5pb24gb2JqZWN0IGltcGxlbWVudCB0aGUgZm9sbG93aW5nIENvdW50ZXIgaW50ZXJmYWNlIGFuZCBjb3VudCB0aGUgbnVtYmVyIG9mIGNyZWF0ZWQgRHJpbmtzXG5pbnRlcmZhY2UgQ291bnRlcntcbiAgICB2YXIgY291bnQ6IEludFxufVxuLy8gVE9ETyB1bmNvbW1lbnQgdG8gdGVzdFxuLy9wcmludGxuKERyaW5rTWFrZXIuY291bnQpIC8vIDMifQ==)

::: details solution(s)

[Solution](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gVE9ETyB1c2luZyB0aGUgb2JqZWN0IGRlY2xhcmF0aW9uIHN5bmN0YXgsIGNyZWF0ZSBhIHNpbmdsZXRvbiBEcmlua0Rpc3BlbnNlciB0aGF0IGhhcyB0aGVzZSBtZXRob2RzOiBwdXREcmluayhEcmluayksIExpc3Q8RHJpbms+IGFsbEF2YWlsYWJsZURyaW5rcygpIGFuZCBwaWNrTGFzdERyaW5rKCk6RHJpbmtcbi8vICBTeW50YXg6IG9iamVjdCBTaW5nbGV0b25OYW1lIHsgLi4uIH0gfVxuXG4vLyBUT0RPIHVuY29tbWVudCB0byB0ZXN0IHlvdSBjb2RlXG4vL0RyaW5rRGlzcGVuc2VyLnB1dERyaW5rKE9iamVjdEV4cHJlc3Npb25zMDEuRHJpbmsoMTAwKSlcbi8vRHJpbmtEaXNwZW5zZXIucHV0RHJpbmsoT2JqZWN0RXhwcmVzc2lvbnMwMS5Ecmluayg1MCkpXG4vL0RyaW5rRGlzcGVuc2VyLnB1dERyaW5rKE9iamVjdEV4cHJlc3Npb25zMDEuRHJpbmsoNzApKVxuLy9wcmludGxuKERyaW5rRGlzcGVuc2VyLmFsbEF2YWlsYWJsZURyaW5rcygpLnNpemUpIC8vIDNcbi8vRHJpbmtEaXNwZW5zZXIucHV0RHJpbmsoT2JqZWN0RXhwcmVzc2lvbnMwMS5waWNrTGFzdERyaW5rKCkpXG4vL3ByaW50bG4oRHJpbmtEaXNwZW5zZXIuYWxsQXZhaWxhYmxlRHJpbmtzKCkuc2l6ZSkgLy8gMlxuXG4vLyBUT0RPIGNyZWF0ZSBhIGNsYXNzIG5hbWVkIERyaW5rTWFrZXIuIFdlIHdhbnQgdG8gaGF2ZSBhIHN0YXRpYyBtZXRob2QgXCJjcmVhdGVEcmluaygpOiBPYmplY3RFeHByZXNzaW9uczAxLkRyaW5rXCIgdGhhdCBjcmVhdGVzIGEgbmV3IERyaW5rLlxuLy8gICBBbiBvYmplY3QgZGVjbGFyYXRpb24gaW5zaWRlIGEgY2xhc3MgY2FuIGJlIG1hcmtlZCBhcyBjb21wYW5pb25cbi8vICAgU3ludGF4OlxuLypcbmNsYXNzIENsYXNzTmFtZSB7XG4gICAgY29tcGFuaW9uIG9iamVjdCAob3B0aW9ubmFsIG5hbWUpIHtcbiAgICAgICAgLi4uXG4gICAgfVxufVxuKi9cbmNsYXNzIERyaW5rTWFrZXIge1xuICAgIGNvbXBhbmlvbiBvYmplY3Q6IENvdW50ZXJ7XG4gICAgICAgIHByaXZhdGUgdmFyIG5iQ3JlYXRlZCA9IDBcbiAgICAgICAgb3ZlcnJpZGUgdmFyIGNvdW50OiBJbnRcbiAgICAgICAgICAgIGdldCgpID0gbmJDcmVhdGVkXG4gICAgICAgICAgICBzZXQodmFsdWUpIHsgbmJDcmVhdGVkID0gdmFsdWV9XG5cbiAgICAgICAgZnVuIGNyZWF0ZURyaW5rKCkgOiBPYmplY3RFeHByZXNzaW9uczAxLkRyaW5re1xuICAgICAgICAgICAgY291bnQgKz0gMVxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdEV4cHJlc3Npb25zMDEuRHJpbmsoMTAwKVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBUT0RPIHVuY29tbWVudCB0byB0ZXN0XG4vL3ZhbCBkcmluayA9IERyaW5rTWFrZXIuY3JlYXRlRHJpbmsoKVxuLy92YWwgZHJpbmsyID0gRHJpbmtNYWtlci5Db21wYW5pb24uY3JlYXRlRHJpbmsoKVxuXG4vLyBUT0RPIHdoYXQgaXMgdGhlIHR5cGUgb2YgY29tcGFuaW9uT2JqZWN0XG4vL3ZhbCBjb21wYW5pb25PYmplY3QgPSBEcmlua01ha2VyXG4vL2NvbXBhbmlvbk9iamVjdC5jcmVhdGVEcmluaygpXG5cbi8vIFRPRE8gbWFrZSB0aGUgZWFybGllciBjb21wYW5pb24gb2JqZWN0IGltcGxlbWVudCB0aGUgZm9sbG93aW5nIENvdW50ZXIgaW50ZXJmYWNlIGFuZCBjb3VudCB0aGUgbnVtYmVyIG9mIGNyZWF0ZWQgRHJpbmtzXG5pbnRlcmZhY2UgQ291bnRlcntcbiAgICB2YXIgY291bnQ6IEludFxufVxuLy8gVE9ETyB1bmNvbW1lbnQgdG8gdGVzdFxuLy9wcmludGxuKERyaW5rTWFrZXIuY291bnQpIC8vIDMifQ==)

:::

#### Exercice 7

[Exercice](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoicGFja2FnZSBjb20ud29ybGRsaW5lLmxlYXJuaW5nLmtvdGxpbi5vYmplY3RzQW5kQ29tcGFuaW9uc1xuXG4vLyBPYmplY3RzIGluIGtvdGxpbiBodHRwczovL2tvdGxpbmxhbmcub3JnL2RvY3MvcmVmZXJlbmNlL29iamVjdC1kZWNsYXJhdGlvbnMuaHRtbFxub3BlbiBjbGFzcyBEcmluayh2YXIgdm9sdW1lOiBJbnQpe1xuICAgIG9wZW4gZnVuIGNvbnN1bWUoY29uc3VtZWRWb2x1bWU6IEludCl7XG4gICAgICAgIHRoaXMudm9sdW1lIC09IGNvbnN1bWVkVm9sdW1lXG4gICAgfVxufVxuaW50ZXJmYWNlIENvbG9yZWR7XG4gICAgdmFsIGNvbG9yOlN0cmluZ1xufVxuXG4vLyBhbm9ueW1vdXMgb2JqZWN0cyBoYXZlIGFjY2VzcyB0byB2YXJpYWJsZXMgaW4gdGhlIGVuY2xvc2luZyBzY29wZVxuZnVuIGNyZWF0ZURyaW5rQW5kQ291bnQoKTogRHJpbmt7XG4gICAgdmFyIG5iQ29uc3VtcHRpb24gPSAwXG4gICAgcmV0dXJuIG9iamVjdCA6IERyaW5rKDEwMCl7XG4gICAgICAgIG92ZXJyaWRlIGZ1biBjb25zdW1lKGNvbnN1bWVkVm9sdW1lOiBJbnQpIHtcbiAgICAgICAgICAgIHN1cGVyLmNvbnN1bWUoY29uc3VtZWRWb2x1bWUpXG4gICAgICAgICAgICBuYkNvbnN1bXB0aW9uICs9IDFcbiAgICAgICAgICAgIHByaW50bG4obmJDb25zdW1wdGlvbilcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuIG1haW4oKSB7XG4gICAgLy8gQ3JlYXRpbmcgYW4gaW5zdGFuY2Ugb2YgRHJpbmtcbiAgICB2YWwgc21hbGxCb3R0bGUgPSBEcmluaygxMDApXG4gICAgLy8gVE9ETyBjcmVhdGUgYSBiaWdCb3R0bGUgd2l0aCBhIHZvbHVtZSBvZiA1MDBcblxuICAgIC8vIEtvdGxpbiBhbGxvd3MgdG8gcXVpY2tseSBjcmVhdGUgYW4gYW5vbnltb3VzIG9iamVjdCB0aGF0IGltcGxlbWVudHMgYW5kIGV4aXN0aW5nIGNsYXNzIGFuZC9vciBpbnRlcmZhY2VzXG4gICAgdmFsIHNtYWxsQ2FyYm9uYXRlZERyaW5rQm90dGxlID0gb2JqZWN0OiBEcmluaygxMDApIHtcbiAgICAgICAgb3ZlcnJpZGUgZnVuIGNvbnN1bWUoY29uc3VtZWRWb2x1bWU6IEludCkge1xuICAgICAgICAgICAgc3VwZXIuY29uc3VtZShjb25zdW1lZFZvbHVtZSlcbiAgICAgICAgICAgIHByaW50bG4oXCJQU0hISEhISFwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIHNtYWxsQ2FyYm9uYXRlZERyaW5rQm90dGxlLmNvbnN1bWUoMjApXG5cbiAgICAvLyBUT0RPIGNyZWF0ZWQgYW4gYW5vbnltb3VzIG9iamVjdCBzbWFsbENhcmJvbmF0ZWRSZWREcmlua0JvdHRsZSB0aGF0IGlzIGJvdGggYSBEcmluayBhbmQgQ29sb3JlZFxuICAgIC8vIFRPRE8gQ2FuIGtvdGxpbiBpbmZlciB0aGUgdHlwZSBvZiBzbWFsbENhcmJvbmF0ZWRSZWREcmlua0JvdHRsZSA/XG5cbiAgICAvLyBUT0RPIG1ha2UgdGhpcyBjb2RlIHByaW50IFwiUmVkXCJcbiAgICAvLyBwcmludGxuKHNtYWxsQ2FyYm9uYXRlZFJlZERyaW5rQm90dGxlLmNvbG9yKVxuICAgIFxuICAgIFxuICAgIC8vIFRPRE8gd2hhdCBpcyBwcmludGVkIGFmdGVyIGNhbGxpbmcgdGhlIGZvbGxvd2luZyBjb2RlID9cbiAgICB2YWwgZHJpbmtUaGF0Q291bnRzID0gY3JlYXRlRHJpbmtBbmRDb3VudCgpXG4gICAgZHJpbmtUaGF0Q291bnRzLmNvbnN1bWUoMTApXG4gICAgZHJpbmtUaGF0Q291bnRzLmNvbnN1bWUoMjApXG5cbiAgICAvLyBUT0RPIFRyeSB0byBndWVzcyB3aGF0IGlzIHByaW50ZWQgaWYgd2UgZ2V0IGFub3RoZXIgZHJpbmsgZnJvbSAnY3JlYXRlRHJpbmtBbmRDb3VudCgpJyBhbmQgY2FsbCBjb25zdW1lID9cblxuICAgIFxuICAgIC8vIEtvdGxpbiBhbHNvIGFsbG93cyB0byBjcmVhdGUgYW5vbnltb3VzIG9iamVjdHMgd2l0aG91dCBzdXBlcnR5cGVzXG4gICAgZnVuIG1peChkcmlua1RvTWl4OiBEcmluayl7XG4gICAgXHR2YWwgbWl4dHVyZSA9IG9iamVjdCB7XG4gICAgICAgICAgICB2YWwgZHJpbmsgPSBkcmlua1RvTWl4XG4gICAgICAgICAgICB2YWwgaW5ncmVkaWVudCA9IFwiU2FsdFwiXG4gICAgXHR9XG4gICAgICAgIC8vIFRPRE8gdHJ5IHRvIHByaW50IHRoZSByZXN1bHQgb2YgbWl4dHVyZS5pbmdyZWRpZW50ICsgbWl4dHVyZS5kcmlua1RvTWl4XG4gICAgICAgIHByaW50bG4oKVxuICAgIH1cbiAgICBtaXgoc21hbGxCb3R0bGUpXG4gICAgXG4gICAgXG4gICAgLy8gTGV0J3MgdHJ5IHRvIHJldHVybiBhbiBhZGhvYyBhbm9ueW1vdXMgb2JqZWN0XG4gICAgZnVuIHByZXBhcmVOZXdNaXgoZHJpbmtUb01peDogRHJpbmspID0gb2JqZWN0IHtcbiAgICAgICAgdmFsIGRyaW5rID0gZHJpbmtUb01peFxuICAgICAgICB2YWwgaW5ncmVkaWVudCA9IFwiU2FsdFwiXG4gICAgfVxuICAgIHZhbCBuZXdNaXggPSBwcmVwYXJlTmV3TWl4KHNtYWxsQm90dGxlKVxuICAgIC8vIFRPRE8gdHlwZSB0byBwcmludCB0aGUgY29tcG9uZW50cyBvZiBuZXdNaXguIElzIGl0IHBvc3NpYmxlIHRvIGFjY2VzcyB0aGUgY29udGVudHMgb2YgdGhlIGFub255bW91cyBvYmplY3Qgb3V0c2lkZSB0aGUgbG9jYWwgc2NvcGUgP1xuXG4gICAgLy8gVE9ETyB3aGF0IGhhcHBlbnMgaWYgd2UgcmVtb3ZlIHRoZSBwcml2YXRlIHF1YWxpZmllciB0byBwcmVwYXJlID9cbiAgICBjbGFzcyBEcmlua01peGVyIHtcbiAgICAgICAgcHJpdmF0ZSBmdW4gcGVyYXByZShkcmlua1RvTWl4OiBEcmluaykgPSBvYmplY3Qge1xuICAgICAgICAgICAgdmFsIGRyaW5rID0gZHJpbmtUb01peFxuICAgICAgICAgICAgdmFsIGluZ3JlZGllbnQgPSBcIlNhbHRcIlxuICAgICAgICB9XG5cbiAgICAgICAgZnVuIG1peCgpe1xuICAgICAgICAgICAgdmFsIHByZXBhcmF0aW9uID0gcGVyYXByZShEcmluaygxMDApKVxuICAgICAgICAgICAgcHJpbnRsbihcIiR7cHJlcGFyYXRpb24uZHJpbmt9IGFuZCAke3ByZXBhcmF0aW9uLmluZ3JlZGllbnR9XCIpXG4gICAgICAgIH1cblx0fVxufSJ9)

::: details Solution(s)

[Solution](https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS43LjEwIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLy8gT2JqZWN0cyBpbiBrb3RsaW4gaHR0cHM6Ly9rb3RsaW5sYW5nLm9yZy9kb2NzL3JlZmVyZW5jZS9vYmplY3QtZGVjbGFyYXRpb25zLmh0bWxcbm9wZW4gY2xhc3MgRHJpbmsodmFyIHZvbHVtZTogSW50KXtcbiAgICBvcGVuIGZ1biBjb25zdW1lKGNvbnN1bWVkVm9sdW1lOiBJbnQpe1xuICAgICAgICB0aGlzLnZvbHVtZSAtPSBjb25zdW1lZFZvbHVtZVxuICAgIH1cbn1cbmludGVyZmFjZSBDb2xvcmVke1xuICAgIHZhbCBjb2xvcjpTdHJpbmdcbn1cblxuLy8gYW5vbnltb3VzIG9iamVjdHMgaGF2ZSBhY2Nlc3MgdG8gdmFyaWFibGVzIGluIHRoZSBlbmNsb3Npbmcgc2NvcGVcbmZ1biBjcmVhdGVEcmlua0FuZENvdW50KCk6IERyaW5re1xuICAgIHZhciBuYkNvbnN1bXB0aW9uID0gMFxuICAgIHJldHVybiBvYmplY3QgOiBEcmluaygxMDApe1xuICAgICAgICBvdmVycmlkZSBmdW4gY29uc3VtZShjb25zdW1lZFZvbHVtZTogSW50KSB7XG4gICAgICAgICAgICBzdXBlci5jb25zdW1lKGNvbnN1bWVkVm9sdW1lKVxuICAgICAgICAgICAgbmJDb25zdW1wdGlvbiArPSAxXG4gICAgICAgICAgICBwcmludGxuKG5iQ29uc3VtcHRpb24pXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1biBtYWluKCkge1xuICAgIC8vIENyZWF0aW5nIGFuIGluc3RhbmNlIG9mIERyaW5rXG4gICAgdmFsIHNtYWxsQm90dGxlID0gRHJpbmsoMTAwKVxuICAgIC8vIFRPRE8gY3JlYXRlIGEgYmlnQm90dGxlIHdpdGggYSB2b2x1bWUgb2YgNTAwXG5cbiAgICAvLyBLb3RsaW4gYWxsb3dzIHRvIHF1aWNrbHkgY3JlYXRlIGFuIGFub255bW91cyBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGFuZCBleGlzdGluZyBjbGFzcyBhbmQvb3IgaW50ZXJmYWNlc1xuICAgIHZhbCBzbWFsbENhcmJvbmF0ZWREcmlua0JvdHRsZSA9IG9iamVjdDogRHJpbmsoMTAwKSB7XG4gICAgICAgIG92ZXJyaWRlIGZ1biBjb25zdW1lKGNvbnN1bWVkVm9sdW1lOiBJbnQpIHtcbiAgICAgICAgICAgIHN1cGVyLmNvbnN1bWUoY29uc3VtZWRWb2x1bWUpXG4gICAgICAgICAgICBwcmludGxuKFwiUFNISEhISEhcIilcbiAgICAgICAgfVxuICAgIH1cbiAgICBzbWFsbENhcmJvbmF0ZWREcmlua0JvdHRsZS5jb25zdW1lKDIwKVxuXG4gICAgLy8gVE9ETyBjcmVhdGVkIGFuIGFub255bW91cyBvYmplY3Qgc21hbGxDYXJib25hdGVkUmVkRHJpbmtCb3R0bGUgdGhhdCBpcyBib3RoIGEgRHJpbmsgYW5kIENvbG9yZWRcbiAgICAvLyBUT0RPIENhbiBrb3RsaW4gaW5mZXIgdGhlIHR5cGUgb2Ygc21hbGxDYXJib25hdGVkUmVkRHJpbmtCb3R0bGUgP1xuICAgIHZhbCBzbWFsbENhcmJvbmF0ZWRSZWREcmlua0JvdHRsZTogQ29sb3JlZCA9IG9iamVjdDogRHJpbmsoMTAwKSwgQ29sb3JlZCB7XG4gICAgICAgIG92ZXJyaWRlIHZhbCBjb2xvcjogU3RyaW5nXG4gICAgICAgICAgICBnZXQoKSA9IFwiUmVkXCJcblxuICAgICAgICBvdmVycmlkZSBmdW4gY29uc3VtZShjb25zdW1lZFZvbHVtZTogSW50KSB7XG4gICAgICAgICAgICBzdXBlci5jb25zdW1lKGNvbnN1bWVkVm9sdW1lKVxuICAgICAgICAgICAgcHJpbnRsbihcIlBTSEhISEhIXCIpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPIG1ha2UgdGhpcyBjb2RlIHByaW50IFwiUmVkXCJcbiAgICAvLyBwcmludGxuKHNtYWxsQ2FyYm9uYXRlZFJlZERyaW5rQm90dGxlLmNvbG9yKVxuICAgIFxuICAgIFxuICAgIC8vIFRPRE8gd2hhdCBpcyBwcmludGVkIGFmdGVyIGNhbGxpbmcgdGhlIGZvbGxvd2luZyBjb2RlID9cbiAgICB2YWwgZHJpbmtUaGF0Q291bnRzID0gY3JlYXRlRHJpbmtBbmRDb3VudCgpXG4gICAgZHJpbmtUaGF0Q291bnRzLmNvbnN1bWUoMTApXG4gICAgZHJpbmtUaGF0Q291bnRzLmNvbnN1bWUoMjApXG5cbiAgICAvLyBUT0RPIFRyeSB0byBndWVzcyB3aGF0IGlzIHByaW50ZWQgaWYgd2UgZ2V0IGFub3RoZXIgZHJpbmsgZnJvbSAnY3JlYXRlRHJpbmtBbmRDb3VudCgpJyBhbmQgY2FsbCBjb25zdW1lID9cblxuICAgIFxuICAgIC8vIEtvdGxpbiBhbHNvIGFsbG93cyB0byBjcmVhdGUgYW5vbnltb3VzIG9iamVjdHMgd2l0aG91dCBzdXBlcnR5cGVzXG4gICAgZnVuIG1peChkcmlua1RvTWl4OiBEcmluayl7XG4gICAgXHR2YWwgbWl4dHVyZSA9IG9iamVjdCB7XG4gICAgICAgICAgICB2YWwgZHJpbmsgPSBkcmlua1RvTWl4XG4gICAgICAgICAgICB2YWwgaW5ncmVkaWVudCA9IFwiU2FsdFwiXG4gICAgXHR9XG4gICAgICAgIC8vIFRPRE8gdHJ5IHRvIHByaW50IHRoZSByZXN1bHQgb2YgbWl4dHVyZS5pbmdyZWRpZW50ICsgbWl4dHVyZS5kcmlua1RvTWl4XG4gICAgICAgIHByaW50bG4oKVxuICAgIH1cbiAgICBtaXgoc21hbGxCb3R0bGUpXG4gICAgXG4gICAgXG4gICAgLy8gTGV0J3MgdHJ5IHRvIHJldHVybiBhbiBhZGhvYyBhbm9ueW1vdXMgb2JqZWN0XG4gICAgZnVuIHByZXBhcmVOZXdNaXgoZHJpbmtUb01peDogRHJpbmspID0gb2JqZWN0IHtcbiAgICAgICAgdmFsIGRyaW5rID0gZHJpbmtUb01peFxuICAgICAgICB2YWwgaW5ncmVkaWVudCA9IFwiU2FsdFwiXG4gICAgfVxuICAgIHZhbCBuZXdNaXggPSBwcmVwYXJlTmV3TWl4KHNtYWxsQm90dGxlKVxuICAgIC8vIFRPRE8gdHlwZSB0byBwcmludCB0aGUgY29tcG9uZW50cyBvZiBuZXdNaXguIElzIGl0IHBvc3NpYmxlIHRvIGFjY2VzcyB0aGUgY29udGVudHMgb2YgdGhlIGFub255bW91cyBvYmplY3Qgb3V0c2lkZSB0aGUgbG9jYWwgc2NvcGUgP1xuXG4gICAgLy8gVE9ETyB3aGF0IGhhcHBlbnMgaWYgd2UgcmVtb3ZlIHRoZSBwcml2YXRlIHF1YWxpZmllciB0byBwcmVwYXJlID9cbiAgICBjbGFzcyBEcmlua01peGVyIHtcbiAgICAgICAgcHJpdmF0ZSBmdW4gcGVyYXByZShkcmlua1RvTWl4OiBEcmluaykgPSBvYmplY3Qge1xuICAgICAgICAgICAgdmFsIGRyaW5rID0gZHJpbmtUb01peFxuICAgICAgICAgICAgdmFsIGluZ3JlZGllbnQgPSBcIlNhbHRcIlxuICAgICAgICB9XG5cbiAgICAgICAgZnVuIG1peCgpe1xuICAgICAgICAgICAgdmFsIHByZXBhcmF0aW9uID0gcGVyYXByZShEcmluaygxMDApKVxuICAgICAgICAgICAgcHJpbnRsbihcIiR7cHJlcGFyYXRpb24uZHJpbmt9IGFuZCAke3ByZXBhcmF0aW9uLmluZ3JlZGllbnR9XCIpXG4gICAgICAgIH1cblx0fVxufSJ9)

:::

## Plus d'exercices et de lecture

- [Kotlin Koans](https://play.kotlinlang.org/koans/overview)
- [Referential transparency](https://sderosiaux.medium.com/why-referential-transparency-matters-7c179424dab5)
